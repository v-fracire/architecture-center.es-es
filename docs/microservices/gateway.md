---
title: Puertas de enlace de API
description: Puertas de enlace de API en microservicios
author: MikeWasson
ms.date: 10/23/2018
ms.openlocfilehash: 41554e6abf4db61d1fa6e501419425d331495afc
ms.sourcegitcommit: fdcacbfdc77370532a4dde776c5d9b82227dff2d
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/24/2018
ms.locfileid: "49962830"
---
# <a name="designing-microservices-api-gateways"></a><span data-ttu-id="9a37a-103">Diseño de microservicios: puertas de enlace de API</span><span class="sxs-lookup"><span data-stu-id="9a37a-103">Designing microservices: API gateways</span></span>

<span data-ttu-id="9a37a-104">En una arquitectura de microservicios, un cliente puede interactuar con más de un servicio front-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-104">In a microservices architecture, a client might interact with more than one front-end service.</span></span> <span data-ttu-id="9a37a-105">Así, ¿cómo un cliente sabe a qué puntos de conexión llamar?</span><span class="sxs-lookup"><span data-stu-id="9a37a-105">Given this fact, how does a client know what endpoints to call?</span></span> <span data-ttu-id="9a37a-106">¿Qué ocurre cuando se introducen nuevos servicios o los servicios existentes se refactorizan?</span><span class="sxs-lookup"><span data-stu-id="9a37a-106">What happens when new services are introduced, or existing services are refactored?</span></span> <span data-ttu-id="9a37a-107">¿Cómo abordan los servicios la terminación SSL, la autenticación y otros problemas?</span><span class="sxs-lookup"><span data-stu-id="9a37a-107">How do services handle SSL termination, authentication, and other concerns?</span></span> <span data-ttu-id="9a37a-108">Una *puerta de enlace de API* puede ayudar a superar estos desafíos.</span><span class="sxs-lookup"><span data-stu-id="9a37a-108">An *API gateway* can help to address these challenges.</span></span> 

![](./images/gateway.png)

## <a name="what-is-an-api-gateway"></a><span data-ttu-id="9a37a-109">¿Qué es una puerta de enlace de API?</span><span class="sxs-lookup"><span data-stu-id="9a37a-109">What is an API gateway?</span></span>

<span data-ttu-id="9a37a-110">Una puerta de enlace de API se ubica entre los clientes y los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-110">An API gateway sits between clients and services.</span></span> <span data-ttu-id="9a37a-111">Actúa como un proxy inverso, enrutando las solicitudes de los clientes a los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-111">It acts as a reverse proxy, routing requests from clients to services.</span></span> <span data-ttu-id="9a37a-112">También puede realizar diversas tareas transversales como la autenticación, la terminación SSL y la limitación de velocidad.</span><span class="sxs-lookup"><span data-stu-id="9a37a-112">It may also perform various cross-cutting tasks such as authentication, SSL termination, and rate limiting.</span></span> <span data-ttu-id="9a37a-113">Si no implementa una puerta de enlace, los clientes deben enviar las solicitudes directamente a los servicios front-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-113">If you don't deploy a gateway, clients must send requests directly to front-end services.</span></span> <span data-ttu-id="9a37a-114">Sin embargo, hay algunos posibles problemas al exponer los servicios directamente a los clientes:</span><span class="sxs-lookup"><span data-stu-id="9a37a-114">However, there are some potential problems with exposing services directly to clients:</span></span>

- <span data-ttu-id="9a37a-115">Puede dar como resultado un código de cliente complejo.</span><span class="sxs-lookup"><span data-stu-id="9a37a-115">It can result in complex client code.</span></span> <span data-ttu-id="9a37a-116">El cliente debe realizar un seguimiento de varios puntos de conexión y controlar los errores de una manera flexible.</span><span class="sxs-lookup"><span data-stu-id="9a37a-116">The client must keep track of multiple endpoints, and handle failures in a resilient way.</span></span> 
- <span data-ttu-id="9a37a-117">Crea acoplamiento entre el cliente y el back-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-117">It creates coupling between the client and the backend.</span></span> <span data-ttu-id="9a37a-118">El cliente debe saber cómo se descomponen los servicios individuales.</span><span class="sxs-lookup"><span data-stu-id="9a37a-118">The client needs to know how the individual services are decomposed.</span></span> <span data-ttu-id="9a37a-119">Eso dificulta mantener al cliente y también refactorizar los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-119">That makes it harder to maintain the client and also harder to refactor services.</span></span>
- <span data-ttu-id="9a37a-120">Una única operación podría requerir llamadas a varios servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-120">A single operation might require calls to multiple services.</span></span> <span data-ttu-id="9a37a-121">Esto puede provocar varios recorridos de ida y vuelta entre el cliente y el servidor, lo que añade una latencia significativa.</span><span class="sxs-lookup"><span data-stu-id="9a37a-121">That can result in multiple network round trips between the client and the server, adding significant latency.</span></span> 
- <span data-ttu-id="9a37a-122">Cada servicio expuesto al público debe controlar aspectos complejos, como la autenticación, SSL y la limitación de velocidad del cliente.</span><span class="sxs-lookup"><span data-stu-id="9a37a-122">Each public-facing service must handle concerns such as authentication, SSL, and client rate limiting.</span></span> 
- <span data-ttu-id="9a37a-123">Los servicios deben exponer un protocolo conocido para el cliente, como HTTP o WebSocket.</span><span class="sxs-lookup"><span data-stu-id="9a37a-123">Services must expose a client-friendly protocol such as HTTP or WebSocket.</span></span> <span data-ttu-id="9a37a-124">Esto limita la elección de los [protocolos de comunicación](./interservice-communication.md).</span><span class="sxs-lookup"><span data-stu-id="9a37a-124">This limits the choice of [communication protocols](./interservice-communication.md).</span></span> 
- <span data-ttu-id="9a37a-125">Los servicios con puntos de conexión públicos constituyen una posible superficie de ataque y deben ser protegidos.</span><span class="sxs-lookup"><span data-stu-id="9a37a-125">Services with public endpoints are a potential attack surface, and must be hardened.</span></span>

<span data-ttu-id="9a37a-126">Una puerta de enlace ayuda a solucionar estos problemas al desacoplar los clientes de los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-126">A gateway helps to address these issues by decoupling clients from services.</span></span> <span data-ttu-id="9a37a-127">Las puertas de enlace pueden realizar una serie de funciones diferentes y es posible que no necesite todas.</span><span class="sxs-lookup"><span data-stu-id="9a37a-127">Gateways can perform a number of different functions, and you may not need all of them.</span></span> <span data-ttu-id="9a37a-128">Las funciones se pueden agrupar en los siguientes patrones de diseño:</span><span class="sxs-lookup"><span data-stu-id="9a37a-128">The functions can be grouped into the following design patterns:</span></span>

<span data-ttu-id="9a37a-129">[Enrutamiento de puertas de enlace](../patterns/gateway-routing.md)</span><span class="sxs-lookup"><span data-stu-id="9a37a-129">[Gateway Routing](../patterns/gateway-routing.md).</span></span> <span data-ttu-id="9a37a-130">Use la puerta de enlace como un proxy inverso para enrutar las solicitudes a uno o varios servicios back-end, usando el enrutamiento de nivel 7.</span><span class="sxs-lookup"><span data-stu-id="9a37a-130">Use the gateway as a reverse proxy to route requests to one or more backend services, using layer 7 routing.</span></span> <span data-ttu-id="9a37a-131">La puerta de enlace proporciona un único punto de conexión para los clientes y ayuda a desacoplar a los clientes de los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-131">The gateway provides a single endpoint for clients, and helps to decouple clients from services.</span></span> 

<span data-ttu-id="9a37a-132">[Agregación de puertas de enlace](../patterns/gateway-aggregation.md).</span><span class="sxs-lookup"><span data-stu-id="9a37a-132">[Gateway Aggregation](../patterns/gateway-aggregation.md).</span></span> <span data-ttu-id="9a37a-133">Use una puerta de enlace para agregar varias solicitudes individuales en una sola solicitud.</span><span class="sxs-lookup"><span data-stu-id="9a37a-133">Use the gateway to aggregate multiple individual requests into a single request.</span></span> <span data-ttu-id="9a37a-134">Este patrón se aplica cuando una única operación requiere llamadas a varios servicios de back-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-134">This pattern applies when a single operation requires calls to multiple backend services.</span></span> <span data-ttu-id="9a37a-135">El cliente envía una solicitud a la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="9a37a-135">The client sends one request to the gateway.</span></span> <span data-ttu-id="9a37a-136">La puerta de enlace envía las solicitudes a los distintos servicios de back-end y, después, agrega los resultados y los devuelve al cliente.</span><span class="sxs-lookup"><span data-stu-id="9a37a-136">The gateway dispatches requests to the various backend services, and then aggregates the results and sends them back to the client.</span></span> <span data-ttu-id="9a37a-137">Así se ayuda a reducir el intercambio de mensajes entre el cliente y el back-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-137">This helps to reduce chattiness between the client and the backend.</span></span> 

<span data-ttu-id="9a37a-138">[Descarga con puertas de enlace](../patterns/gateway-offloading.md).</span><span class="sxs-lookup"><span data-stu-id="9a37a-138">[Gateway Offloading](../patterns/gateway-offloading.md).</span></span> <span data-ttu-id="9a37a-139">Use la puerta de enlace para descargar la funcionalidad de los servicios individuales a la puerta de enlace, especialmente cuando se dan cuestiones transversales.</span><span class="sxs-lookup"><span data-stu-id="9a37a-139">Use the gateway to offload functionality from individual services to the gateway, particularly cross-cutting concerns.</span></span> <span data-ttu-id="9a37a-140">Puede ser útil consolidar estas funciones en un solo lugar, en lugar de responsabilizar de su implementación a todos los servicios.</span><span class="sxs-lookup"><span data-stu-id="9a37a-140">It can be useful to consolidate these functions into one place, rather than making every service responsible for implementing them.</span></span> <span data-ttu-id="9a37a-141">En especial, esto es así en el caso de características que requieren habilidades especializadas para una implementación correcta, como la autenticación y la autorización.</span><span class="sxs-lookup"><span data-stu-id="9a37a-141">This is particularly true for features that requires specialized skills to implement correctly, such as authentication and authorization.</span></span> 

<span data-ttu-id="9a37a-142">Estos son algunos ejemplos de funcionalidad que puede descargar a una puerta de enlace:</span><span class="sxs-lookup"><span data-stu-id="9a37a-142">Here are some examples of functionality that could be offloaded to a gateway:</span></span>

- <span data-ttu-id="9a37a-143">Terminación de SSL</span><span class="sxs-lookup"><span data-stu-id="9a37a-143">SSL termination</span></span>
- <span data-ttu-id="9a37a-144">Autenticación</span><span class="sxs-lookup"><span data-stu-id="9a37a-144">Authentication</span></span>
- <span data-ttu-id="9a37a-145">Lista de direcciones IP permitidas</span><span class="sxs-lookup"><span data-stu-id="9a37a-145">IP whitelisting</span></span>
- <span data-ttu-id="9a37a-146">Limitación de la tasa de clientes</span><span class="sxs-lookup"><span data-stu-id="9a37a-146">Client rate limiting (throttling)</span></span>
- <span data-ttu-id="9a37a-147">Registro y supervisión</span><span class="sxs-lookup"><span data-stu-id="9a37a-147">Logging and monitoring</span></span>
- <span data-ttu-id="9a37a-148">Almacenamiento en caché de respuesta</span><span class="sxs-lookup"><span data-stu-id="9a37a-148">Response caching</span></span>
- <span data-ttu-id="9a37a-149">Firewall de aplicaciones web</span><span class="sxs-lookup"><span data-stu-id="9a37a-149">Web application firewall</span></span>
- <span data-ttu-id="9a37a-150">Compresión GZIP</span><span class="sxs-lookup"><span data-stu-id="9a37a-150">GZIP compression</span></span>
- <span data-ttu-id="9a37a-151">Mantenimiento de contenido estático</span><span class="sxs-lookup"><span data-stu-id="9a37a-151">Servicing static content</span></span>

## <a name="choosing-a-gateway-technology"></a><span data-ttu-id="9a37a-152">Elección de una tecnología de puerta de enlace</span><span class="sxs-lookup"><span data-stu-id="9a37a-152">Choosing a gateway technology</span></span>

<span data-ttu-id="9a37a-153">Aquí tiene algunas opciones para implementar una puerta de enlace de API en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="9a37a-153">Here are some options for implementing an API gateway in your application.</span></span>

- <span data-ttu-id="9a37a-154">**Servidor de proxy inverso**.</span><span class="sxs-lookup"><span data-stu-id="9a37a-154">**Reverse proxy server**.</span></span> <span data-ttu-id="9a37a-155">Nginx y HAProxy son servidores de proxy inverso comunes que admiten características tales como el equilibrio de carga, SSL y enrutamiento de nivel 7.</span><span class="sxs-lookup"><span data-stu-id="9a37a-155">Nginx and HAProxy are popular reverse proxy servers that support features such as load balancing, SSL, and layer 7 routing.</span></span> <span data-ttu-id="9a37a-156">Ambos son productos gratuitos y de código abierto, con ediciones de pago que proporcionan características adicionales y opciones de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="9a37a-156">They are both free, open-source products, with paid editions that provide additional features and support options.</span></span> <span data-ttu-id="9a37a-157">Nginx y HAProxy son ambos productos consolidados con conjuntos variados de características y un rendimiento elevado.</span><span class="sxs-lookup"><span data-stu-id="9a37a-157">Nginx and HAProxy are both mature products with rich feature sets and high performance.</span></span> <span data-ttu-id="9a37a-158">Puede ampliarlos con módulos de terceros o escribiendo scripts personalizados en Lua.</span><span class="sxs-lookup"><span data-stu-id="9a37a-158">You can extend them with third-party modules or by writing custom scripts in Lua.</span></span> <span data-ttu-id="9a37a-159">Nginx también admite un módulo de scripting basado en JavaScript que se llama NginScript.</span><span class="sxs-lookup"><span data-stu-id="9a37a-159">Nginx also supports a JavaScript-based scripting module called NginScript.</span></span>

- <span data-ttu-id="9a37a-160">**Controlador de entrada del servicio de malla**.</span><span class="sxs-lookup"><span data-stu-id="9a37a-160">**Service mesh ingress controller**.</span></span> <span data-ttu-id="9a37a-161">Si utiliza un servicio malla como linkerd o Istio, tenga en cuenta las características que se proporcionan con el controlador de entrada para ese servicio malla.</span><span class="sxs-lookup"><span data-stu-id="9a37a-161">If you are using a service mesh such as linkerd or Istio, consider the features that are provided by the ingress controller for that service mesh.</span></span> <span data-ttu-id="9a37a-162">Por ejemplo, el controlador de entrada Istio admite enrutamiento de nivel 7, redirecciones HTTP, reintentos y otras características.</span><span class="sxs-lookup"><span data-stu-id="9a37a-162">For example, the Istio ingress controller supports layer 7 routing, HTTP redirects, retries, and other features.</span></span> 

- <span data-ttu-id="9a37a-163">[Azure Application Gateway](/azure/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="9a37a-163">[Azure Application Gateway](/azure/application-gateway/).</span></span> <span data-ttu-id="9a37a-164">Application Gateway es un servicio de equilibrio de carga administrada que puede realizar el enrutamiento de nivel 7 y la terminación SSL.</span><span class="sxs-lookup"><span data-stu-id="9a37a-164">Application Gateway is a managed load balancing service that can perform layer-7 routing and SSL termination.</span></span> <span data-ttu-id="9a37a-165">También proporciona un firewall de aplicación web (WAF).</span><span class="sxs-lookup"><span data-stu-id="9a37a-165">It also provides a web application firewall (WAF).</span></span>

- <span data-ttu-id="9a37a-166">[Azure API Management](/azure/api-management/).</span><span class="sxs-lookup"><span data-stu-id="9a37a-166">[Azure API Management](/azure/api-management/).</span></span> <span data-ttu-id="9a37a-167">Azure API Management es una solución completa para publicar API para clientes externos e internos.</span><span class="sxs-lookup"><span data-stu-id="9a37a-167">API Management is a turnkey solution for publishing APIs to external and internal customers.</span></span> <span data-ttu-id="9a37a-168">Proporciona características que resultan útiles para administrar una API expuesta al público, incluida la limitación de velocidad, la lista de direcciones IP permitidas y la autenticación con Azure Active Directory u otros proveedores de identidad.</span><span class="sxs-lookup"><span data-stu-id="9a37a-168">It provides features that are useful for managing a public-facing API, including rate limiting, IP white listing, and authentication using Azure Active Directory or other identity providers.</span></span> <span data-ttu-id="9a37a-169">API Management no realiza el equilibrio de carga, por lo que debe usarse junto con un equilibrador de carga como Application Gateway o un proxy inverso.</span><span class="sxs-lookup"><span data-stu-id="9a37a-169">API Management doesn't perform any load balancing, so it should be used in conjunction with a load balancer such as Application Gateway or a reverse proxy.</span></span> <span data-ttu-id="9a37a-170">Para obtener información acerca del uso de API Management con Application Gateway, consulte [Integración de API Management en una red virtual interna con Application Gateway](/azure/api-management/api-management-howto-integrate-internal-vnet-appgateway).</span><span class="sxs-lookup"><span data-stu-id="9a37a-170">For information about using API Management with Application Gateway, see [Integrate API Management in an internal VNET with Application Gateway](/azure/api-management/api-management-howto-integrate-internal-vnet-appgateway).</span></span>

<span data-ttu-id="9a37a-171">Al elegir una tecnología de puerta de enlace, tenga en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="9a37a-171">When choosing a gateway technology, consider the following:</span></span>

<span data-ttu-id="9a37a-172">**Características**.</span><span class="sxs-lookup"><span data-stu-id="9a37a-172">**Features**.</span></span> <span data-ttu-id="9a37a-173">Las opciones enumeradas antes admiten el enrutamiento de nivel 7, pero la compatibilidad con otras características variará.</span><span class="sxs-lookup"><span data-stu-id="9a37a-173">The options listed above all support layer 7 routing, but support for other features will vary.</span></span> <span data-ttu-id="9a37a-174">Según las características que necesite, puede implementar más de una puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="9a37a-174">Depending on the features that you need, you might deploy more than one gateway.</span></span> 

<span data-ttu-id="9a37a-175">**Implementación**.</span><span class="sxs-lookup"><span data-stu-id="9a37a-175">**Deployment**.</span></span> <span data-ttu-id="9a37a-176">Azure Application Gateway y API Management son servicios administrados.</span><span class="sxs-lookup"><span data-stu-id="9a37a-176">Azure Application Gateway and API Management are managed services.</span></span> <span data-ttu-id="9a37a-177">Nginx y HAProxy generalmente se ejecutarán en contenedores dentro del clúster, pero también se pueden implementar en máquinas virtuales dedicadas fuera.</span><span class="sxs-lookup"><span data-stu-id="9a37a-177">Nginx and HAProxy will typically run in containers inside the cluster, but can also be deployed to dedicated VMs outside of the cluster.</span></span> <span data-ttu-id="9a37a-178">Así se aísla la puerta de enlace del resto de la carga de trabajo, pero se genera una mayor sobrecarga de administración.</span><span class="sxs-lookup"><span data-stu-id="9a37a-178">This isolates the gateway from the rest of the workload, but incurs higher management overhead.</span></span>

<span data-ttu-id="9a37a-179">**Administración**.</span><span class="sxs-lookup"><span data-stu-id="9a37a-179">**Management**.</span></span> <span data-ttu-id="9a37a-180">Cuando los servicios se actualizan o se agregan otros nuevos, las reglas de enrutamiento de puerta de enlace tienen que actualizarse.</span><span class="sxs-lookup"><span data-stu-id="9a37a-180">When services are updated or new services are added, the gateway routing rules may need to be updated.</span></span> <span data-ttu-id="9a37a-181">Tenga en cuenta cómo se administrará este proceso.</span><span class="sxs-lookup"><span data-stu-id="9a37a-181">Consider how this process will be managed.</span></span> <span data-ttu-id="9a37a-182">Algunas consideraciones similares se aplican a la administración de certificados SSL, listas de direcciones IP permitidas y otros aspectos de la configuración.</span><span class="sxs-lookup"><span data-stu-id="9a37a-182">Similar considerations apply to managing SSL certificates, IP whitelists, and other aspects of configuration.</span></span>

## <a name="deploying-nginx-or-haproxy-to-kubernetes"></a><span data-ttu-id="9a37a-183">Implementación de Nginx o HAProxy en Kubernetes</span><span class="sxs-lookup"><span data-stu-id="9a37a-183">Deploying Nginx or HAProxy to Kubernetes</span></span>

<span data-ttu-id="9a37a-184">Puede implementar Nginx o HAProxy en Kubernetes como [ReplicaSet](https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/) o [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/) que especifica la imagen de contenedor de Nginx o HAProxy.</span><span class="sxs-lookup"><span data-stu-id="9a37a-184">You can deploy Nginx or HAProxy to Kubernetes as a [ReplicaSet](https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/) or [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/) that specifies the Nginx or HAProxy container image.</span></span> <span data-ttu-id="9a37a-185">Use ConfigMap para almacenar el archivo de configuración del proxy y móntelo como un volumen.</span><span class="sxs-lookup"><span data-stu-id="9a37a-185">Use a ConfigMap to store the configuration file for the proxy, and mount the ConfigMap as a volume.</span></span> <span data-ttu-id="9a37a-186">Cree un servicio del tipo del equilibrador de carga para exponer la puerta de enlace a través de Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="9a37a-186">Create a service of type LoadBalancer to expose the gateway through an Azure Load Balancer.</span></span> 

<span data-ttu-id="9a37a-187">Una alternativa es crear un recurso Ingress Controller.</span><span class="sxs-lookup"><span data-stu-id="9a37a-187">An alternative is to create an Ingress Controller.</span></span> <span data-ttu-id="9a37a-188">Se trata de un recurso de Kubernetes que implementa un servidor proxy inverso o un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="9a37a-188">An Ingress Controller is a Kubernetes resource that deploys a load balancer or reverse proxy server.</span></span> <span data-ttu-id="9a37a-189">Existen varias implementaciones, como son Nginx y HAProxy.</span><span class="sxs-lookup"><span data-stu-id="9a37a-189">Several implementations exist, including Nginx and HAProxy.</span></span> <span data-ttu-id="9a37a-190">Un recurso independiente denominado elemento Ingress define la configuración de Ingress Controller, tales como las reglas de enrutamiento y los certificados TLS.</span><span class="sxs-lookup"><span data-stu-id="9a37a-190">A separate resource called an Ingress defines settings for the Ingress Controller, such as routing rules and TLS certificates.</span></span> <span data-ttu-id="9a37a-191">De este modo, no es necesario administrar los complejos archivos de configuración específicos de una tecnología de servidor proxy determinada.</span><span class="sxs-lookup"><span data-stu-id="9a37a-191">That way, you don't need to manage complex configuration files that are specific to a particular proxy server technology.</span></span>

<span data-ttu-id="9a37a-192">La puerta de enlace es un posible cuello de botella o un único punto de error en el sistema, por lo que siempre debe implementar al menos dos réplicas para lograr una elevada disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="9a37a-192">The gateway is a potential bottleneck or single point of failure in the system, so always deploy at least two replicas for high availability.</span></span> <span data-ttu-id="9a37a-193">Puede que deba escalar horizontalmente las réplicas todavía más, según la carga.</span><span class="sxs-lookup"><span data-stu-id="9a37a-193">You may need to scale out the replicas further, depending on the load.</span></span> 

<span data-ttu-id="9a37a-194">Considere también ejecutar la puerta de enlace en un conjunto dedicado de nodos del clúster.</span><span class="sxs-lookup"><span data-stu-id="9a37a-194">Also consider running the gateway on a dedicated set of nodes in the cluster.</span></span> <span data-ttu-id="9a37a-195">Las ventajas de este enfoque incluyen:</span><span class="sxs-lookup"><span data-stu-id="9a37a-195">Benefits to this approach include:</span></span>

- <span data-ttu-id="9a37a-196">Aislamiento.</span><span class="sxs-lookup"><span data-stu-id="9a37a-196">Isolation.</span></span> <span data-ttu-id="9a37a-197">Todo el tráfico entrante va a un conjunto fijo de nodos, que se pueden aislar de los servicios de back-end.</span><span class="sxs-lookup"><span data-stu-id="9a37a-197">All inbound traffic goes to a fixed set of nodes, which can be isolated from backend services.</span></span>

- <span data-ttu-id="9a37a-198">Configuración estable.</span><span class="sxs-lookup"><span data-stu-id="9a37a-198">Stable configuration.</span></span> <span data-ttu-id="9a37a-199">Si la puerta de enlace está mal configurada, toda la aplicación podría dejar de estar disponible.</span><span class="sxs-lookup"><span data-stu-id="9a37a-199">If the gateway is misconfigured, the entire application may become unavailable.</span></span> 

- <span data-ttu-id="9a37a-200">Rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9a37a-200">Performance.</span></span> <span data-ttu-id="9a37a-201">Puede utilizar una configuración de máquina virtual específica para la puerta de enlace por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9a37a-201">You may want to use a specific VM configuration for the gateway for performance reasons.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="9a37a-202">Registro y supervisión</span><span class="sxs-lookup"><span data-stu-id="9a37a-202">Logging and monitoring</span></span>](./logging-monitoring.md)
