---
title: 'Adopción de la nube empresarial: Diseño de gobierno en Azure para varios equipos'
description: Instrucciones para configurar los controles de gobierno de Azure de varios equipos, varias cargas de trabajo y varios entornos
author: petertaylor9999
ms.date: 09/10/2018
ms.openlocfilehash: ac2a63ad6ced1039290dc0bf5132b0d87a2c79cf
ms.sourcegitcommit: c49aeef818d7dfe271bc4128b230cfc676f05230
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/11/2018
ms.locfileid: "44389424"
---
# <a name="enterprise-cloud-adoption-governance-design-for-multiple-teams"></a><span data-ttu-id="1490c-103">Adopción de la nube empresarial: Diseño de gobierno para varios equipos</span><span class="sxs-lookup"><span data-stu-id="1490c-103">Enterprise Cloud Adoption: Governance design for multiple teams</span></span>

<span data-ttu-id="1490c-104">El objetivo de esta guía es ayudarle a obtener información sobre el proceso de diseño de un modelo de gobierno de recursos en Azure que admita varios equipos, varias cargas de trabajo y varios entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-104">The goal of this guidance is to help you learn the process for designing a resource governance model in Azure to support multiple teams, multiple workloads, and multiple environments.</span></span>  <span data-ttu-id="1490c-105">Veremos un conjunto de requisitos de gobierno hipotéticos y, después, describiremos varias implementaciones de ejemplo que cumplen dichos requisitos.</span><span class="sxs-lookup"><span data-stu-id="1490c-105">We'll look at a set of hypothetical governance requirements, then go through several example implementations that satisfy those requirements.</span></span>

<span data-ttu-id="1490c-106">Los requisitos son:</span><span class="sxs-lookup"><span data-stu-id="1490c-106">The requirements are:</span></span>
* <span data-ttu-id="1490c-107">La empresa planea la transición de nuevos roles y responsabilidades en la nube a un conjunto de usuarios y, por tanto, se requiere la administración de identidades para varios equipos con diferentes necesidades de acceso a los recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-107">The enterprise plans to transition new cloud roles and responsibilities to a set of users and therefore requires identity management for multiple teams with different resource access needs in Azure.</span></span> <span data-ttu-id="1490c-108">Este sistema de administración de identidades es necesario para almacenar la identidad de los usuarios siguientes:</span><span class="sxs-lookup"><span data-stu-id="1490c-108">This identity management system is required to store the identity of the following users:</span></span>
  1. <span data-ttu-id="1490c-109">La persona de la organización responsable de la propiedad de las **suscripciones**.</span><span class="sxs-lookup"><span data-stu-id="1490c-109">The individual in your organization responsible for ownership of **subscriptions**.</span></span>
  2. <span data-ttu-id="1490c-110">La persona de la organización responsable de los **recursos de la infraestructura compartida** utilizados para conectar la red local a una red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-110">The individual in your organization responsible for the **shared infrastructure resources** used to connect your on-premises network to an Azure virtual network.</span></span> 
  3. <span data-ttu-id="1490c-111">Dos personas de la organización responsables de administrar una **carga de trabajo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-111">Two individuals in your organization responsible for managing a **workload**.</span></span> 
* <span data-ttu-id="1490c-112">Compatibilidad para varios **entornos**.</span><span class="sxs-lookup"><span data-stu-id="1490c-112">Support for multiple **environments**.</span></span> <span data-ttu-id="1490c-113">Un entorno es una agrupación lógica de recursos, como máquinas virtuales, redes virtuales y servicios de enrutamiento de tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="1490c-113">An environment is a logical grouping of resources, such as virtual machines, virtual networking, and network traffic routing services.</span></span> <span data-ttu-id="1490c-114">Estos grupos de recursos tienen requisitos de seguridad y administración similares y se suelen usar para un propósito específico, como pruebas o producción.</span><span class="sxs-lookup"><span data-stu-id="1490c-114">These groups of resources have similar management and security requirements and are typically used for a specific purpose such as testing or production.</span></span> <span data-ttu-id="1490c-115">En este ejemplo, son necesarios tres entornos:</span><span class="sxs-lookup"><span data-stu-id="1490c-115">In this example, the  requirement is for three environments:</span></span>
  1. <span data-ttu-id="1490c-116">Un **entorno de infraestructura compartida** que incluya los recursos compartidos por las cargas de trabajo en otros entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-116">A **shared infrastructure environment** that includes resources shared by workloads in other environments.</span></span> <span data-ttu-id="1490c-117">Por ejemplo, una red virtual con una subred de puerta de enlace que proporciona conectividad con el entorno local.</span><span class="sxs-lookup"><span data-stu-id="1490c-117">For example, a virtual network with a gateway subnet that provides connectivity to on-premises.</span></span>
  2. <span data-ttu-id="1490c-118">Un **entorno de producción** con las directivas de seguridad más restrictivas.</span><span class="sxs-lookup"><span data-stu-id="1490c-118">A **production environment** with the most restrictive security policies.</span></span> <span data-ttu-id="1490c-119">Puede incluir las cargas de trabajo de acceso interno o externo.</span><span class="sxs-lookup"><span data-stu-id="1490c-119">May include internal or external facing workloads.</span></span>
  3. <span data-ttu-id="1490c-120">Un **entorno de desarrollo** para los trabajos de pruebas y prueba de concepto.</span><span class="sxs-lookup"><span data-stu-id="1490c-120">A **development environment** for proof-of-concept and testing work.</span></span> <span data-ttu-id="1490c-121">Las directivas de seguridad, de cumplimiento normativo y de costos de este entorno difieren de los del entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="1490c-121">This environment has security, compliance, and cost policies that differ from those in the production environment.</span></span>
* <span data-ttu-id="1490c-122">Un **modelo de permisos de privilegios mínimos** en el cual los usuarios no poseen permisos de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="1490c-122">A **permissions model of least privilege** in which users have no permissions by default.</span></span> <span data-ttu-id="1490c-123">El modelo debe admitir lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1490c-123">The model must support the following:</span></span>
  * <span data-ttu-id="1490c-124">Un único usuario de confianza en el ámbito de la suscripción con permiso para asignar derechos de acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-124">A single trusted user at the subscription scope with permission to assign resource access rights.</span></span>
  * <span data-ttu-id="1490c-125">De forma predeterminada, a los propietarios de las cargas de trabajo se les deniega el acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-125">Each workload owner is denied access to resources by default.</span></span> <span data-ttu-id="1490c-126">Los derechos de acceso a los recursos los concede explícitamente el usuario de confianza solo en el ámbito de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-126">Resource access rights are granted explicitly by the single trusted user at the subscription scope.</span></span>
  * <span data-ttu-id="1490c-127">Acceso de administración a los recursos de la infraestructura compartida limitado al propietario de la infraestructura compartida.</span><span class="sxs-lookup"><span data-stu-id="1490c-127">Management access for the shared infrastructure resources limited to the shared infrastructure owner.</span></span>  
  * <span data-ttu-id="1490c-128">Acceso de administración a cada carga de trabajo restringido al propietario de la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-128">Management access for each workload restricted to the workload owner.</span></span>
  * <span data-ttu-id="1490c-129">La empresa no desea tener que administrar los roles de forma independiente en cada uno de los tres entornos, por lo tanto, solo se necesita el uso de [roles de RBAC integrados][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="1490c-129">The enterprise does not want to have to manage roles independently in each of the three environments, therefore requires the use of [built-in RBAC roles][rbac-built-in-roles] only.</span></span> <span data-ttu-id="1490c-130">Si la empresa desea utilizar roles personalizados de RBAC, es necesario un proceso adicional para sincronizar los roles personalizados en los tres entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-130">If the enterprise were to use custom RBAC roles, an additional process is required to synchronize custom roles across the three environments.</span></span> 
* <span data-ttu-id="1490c-131">Seguimiento de los costos por nombre de propietario de la carga de trabajo, entorno o ambos.</span><span class="sxs-lookup"><span data-stu-id="1490c-131">Cost tracking by workload owner name, environment, or both.</span></span> 

## <a name="identity-management"></a><span data-ttu-id="1490c-132">Administración de identidades</span><span class="sxs-lookup"><span data-stu-id="1490c-132">Identity management</span></span>

<span data-ttu-id="1490c-133">Antes de diseñar la administración de identidades para nuestro modelo de gobierno, es importante comprender las cuatro áreas principales que incluye:</span><span class="sxs-lookup"><span data-stu-id="1490c-133">Before we can design identity management for your governance model, it's important to understand the four major areas it encompasses:</span></span>

* <span data-ttu-id="1490c-134">Administración: procesos y herramientas para crear, modificar y eliminar identidades de usuario.</span><span class="sxs-lookup"><span data-stu-id="1490c-134">Administration: the processes and tools for creating, editing, and deleting user identity.</span></span>
* <span data-ttu-id="1490c-135">Autenticación: validar las credenciales para comprobar la identidad del usuario; por ejemplo, un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="1490c-135">Authentication: verifying user identity by validating credentials, such as a user name and password.</span></span>
* <span data-ttu-id="1490c-136">Autorización: determinar a qué recursos se permite acceder a un usuario autenticado o las operaciones que tienen permiso para realizar.</span><span class="sxs-lookup"><span data-stu-id="1490c-136">Authorization: determining which resources an authenticated user is allowed to access or what operations they have permission to perform.</span></span>
* <span data-ttu-id="1490c-137">Auditoría: revisión periódica de los registros y otra información para detectar problemas de seguridad relacionados con la identidad de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="1490c-137">Auditing: periodically reviewing logs and other information to discover security issues related to user identity.</span></span> <span data-ttu-id="1490c-138">Esto incluye la revisión de los patrones de uso sospechosos, la revisión periódica de los permisos de usuario para comprobar que son precisos, entre otras funciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-138">This includes reviewing suspicious usage patterns, periodically reviewing user permissions to verify they are accurate, and other functions.</span></span>

<span data-ttu-id="1490c-139">Hay solo un servicio de Azure de confianza para la identidad y es Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="1490c-139">There is only one service trusted by Azure for identity, and that is Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="1490c-140">Los usuarios se agregan a Azure AD, que se usa para todas las funciones enumeradas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="1490c-140">We'll be adding users to Azure AD and using it for all of the functions listed above.</span></span> <span data-ttu-id="1490c-141">Pero antes de ver cómo configurar Azure AD, es importante comprender las cuentas con privilegios que se utilizan para administrar el acceso a estos servicios.</span><span class="sxs-lookup"><span data-stu-id="1490c-141">But before we look at how we'll configure Azure AD, it's important to understand the privileged accounts that are used to manage access to these services.</span></span>

<span data-ttu-id="1490c-142">Cuando la organización se registró para una cuenta de Azure, se asignó al menos un **propietario de la cuenta** de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-142">When your organization signed up for an Azure account, at least one Azure **account owner** was assigned.</span></span> <span data-ttu-id="1490c-143">Además, se creó un **inquilino** de Azure AD, a menos que ya hubiera un inquilino asociado con el uso por parte de la organización de otros servicios de Microsoft como Office 365.</span><span class="sxs-lookup"><span data-stu-id="1490c-143">Also, an Azure AD **tenant** was created, unless an existing tenant was already associated with your organization's use of other Microsoft services such as Office 365.</span></span> <span data-ttu-id="1490c-144">Al crear el inquilino de Azure AD, se asocia un **administrador global** con permisos completos.</span><span class="sxs-lookup"><span data-stu-id="1490c-144">A **global administrator** with full permissions on the Azure AD tenant was associated when it was created.</span></span> 

<span data-ttu-id="1490c-145">Ambas identidades de usuario, administrador global de Azure AD y propietario de la cuenta de Azure, se almacenan en un sistema de identidades de alta seguridad administrado por Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1490c-145">The user identities for both the Azure Account Owner and the Azure AD global administrator are stored in a highly secure identity system that is managed by Microsoft.</span></span> <span data-ttu-id="1490c-146">El propietario de la cuenta de Azure tiene autorización para crear, actualizar y eliminar suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-146">The Azure Account Owner is authorized to create, update, and delete subscriptions.</span></span> <span data-ttu-id="1490c-147">El administrador global de Azure AD tiene autorización para realizar muchas acciones en Azure AD pero, para los fines de esta guía de diseño, nos centraremos en la creación y eliminación de identidades de usuario.</span><span class="sxs-lookup"><span data-stu-id="1490c-147">The Azure AD global administrator is authorized to perform many actions in Azure AD, but for this design guide we'll focus on the creation and deletion of user identity.</span></span> 

> [!NOTE]
> <span data-ttu-id="1490c-148">Puede que su organización ya tenga un inquilino de Azure AD si ya hay un licencia de Office 365 o Intune asociada a su cuenta.</span><span class="sxs-lookup"><span data-stu-id="1490c-148">Your organization may already have an existing Azure AD tenant if there's an existing Office 365 or Intune license associated with your account.</span></span>

<span data-ttu-id="1490c-149">El propietario de la cuenta de Azure tiene permiso para crear, actualizar y eliminar suscripciones:</span><span class="sxs-lookup"><span data-stu-id="1490c-149">The Azure Account Owner has permission to create, update, and delete subscriptions:</span></span> 

<span data-ttu-id="1490c-150">![Cuenta de Azure con el Administrador de cuentas de Azure y el administrador global de Azure AD](../_images/governance-3-0.png)
*Figura 1. Cuenta de Azure con el Administrador de cuentas de Azure y el administrador global de Azure AD.*</span><span class="sxs-lookup"><span data-stu-id="1490c-150">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0.png)
*Figure 1. An Azure account with an Account Manager and Azure AD Global Administrator.*</span></span>

<span data-ttu-id="1490c-151">El **administrador global** de Azure AD tiene permiso para crear cuentas de usuario:</span><span class="sxs-lookup"><span data-stu-id="1490c-151">The Azure AD **global administrator** has permission to create user accounts:</span></span>  

<span data-ttu-id="1490c-152">![Cuenta de Azure con el Administrador de cuentas de Azure y el administrador global de Azure AD](../_images/governance-3-0a.png)
*Figura 2. El administrador global de Azure AD crea las cuentas de usuario necesarias en el inquilino.*</span><span class="sxs-lookup"><span data-stu-id="1490c-152">![Azure account with Azure Account Manager and Azure AD global admin](../_images/governance-3-0a.png)
*Figure 2. The Azure AD Global Administrator creates the required user accounts in the tenant.*</span></span>

<span data-ttu-id="1490c-153">Las dos primeras cuentas, **propietario de la carga de trabajo de App1** y **propietario de la carga de trabajo de App2**, están asociadas a una persona de la organización responsable de administrar una carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-153">The first two accounts, **App1 Workload Owner** and **App2 Workload Owner** are each associated with an individual in your organization responsible for managing a workload.</span></span> <span data-ttu-id="1490c-154">La cuenta de **operaciones de red** pertenece a la persona responsable de los recursos de la infraestructura compartida.</span><span class="sxs-lookup"><span data-stu-id="1490c-154">The **network operations** account is owned by the individual that is responsible for the shared infrastructure resources.</span></span> <span data-ttu-id="1490c-155">Por último, la cuenta del **propietario de la suscripción** está asociada con la persona responsable de la propiedad de las suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-155">Finally, the **subscription owner** account is associated with the individual responsible for ownership of subscriptions.</span></span>

## <a name="resource-access-permissions-model-of-least-privilege"></a><span data-ttu-id="1490c-156">Modelo de permisos de acceso a recursos con privilegios mínimos</span><span class="sxs-lookup"><span data-stu-id="1490c-156">Resource access permissions model of least privilege</span></span>

<span data-ttu-id="1490c-157">Ahora que tenemos las cuentas de usuario y el sistema de administración de identidades creados, hay que decidir cómo se aplicarán los roles del control de acceso basado en rol (RBAC) a cada cuenta para admitir un modelo de permisos con privilegios mínimos.</span><span class="sxs-lookup"><span data-stu-id="1490c-157">Now that your identity management system and user accounts have been created, we have to decide how we'll apply role-based access control (RBAC) roles to each account to support a permissions model of least privilege.</span></span>

<span data-ttu-id="1490c-158">Otro requisito indica que los recursos asociados a cada carga de trabajo estén aislados entre sí para que ningún propietario de carga de trabajo tenga acceso administrativo a otras cargas de trabajo que no les pertenezcan.</span><span class="sxs-lookup"><span data-stu-id="1490c-158">There's another requirement stating the resources associated with each workload be isolated from one another such that no one workload owner has management access to any other workload they do not own.</span></span> <span data-ttu-id="1490c-159">También hay un requisito para implementar este modelo usando solo los [roles integrados de RBAC de Azure][rbac-built-in-roles].</span><span class="sxs-lookup"><span data-stu-id="1490c-159">There's also a requirement to implement this model using only [built-in roles for Azure RBAC][rbac-built-in-roles].</span></span>

<span data-ttu-id="1490c-160">Cada rol RBAC se aplica en uno de los tres ámbitos en Azure: **suscripción**, **grupo de recursos** y **recursos** individuales.</span><span class="sxs-lookup"><span data-stu-id="1490c-160">Each RBAC role is applied at one of three scopes in Azure: **subscription**, **resource group**, then an individual **resource**.</span></span> <span data-ttu-id="1490c-161">Los roles se heredan en los ámbitos inferiores.</span><span class="sxs-lookup"><span data-stu-id="1490c-161">Roles are inherited at lower scopes.</span></span> <span data-ttu-id="1490c-162">Por ejemplo, si a un usuario se le asigna el [rol de propietario integrada][rbac-built-in-owner] en el nivel de suscripción, ese rol también se asigna a ese usuario en el nivel de recurso individual y de grupo de recursos, a menos que se invalide.</span><span class="sxs-lookup"><span data-stu-id="1490c-162">For example, if a user is assigned the [built-in owner role][rbac-built-in-owner] at the subscription level, that role is also assigned to that user at the resource group and individual resource level unless it's overridden.</span></span>

<span data-ttu-id="1490c-163">Por lo tanto, para crear un modelo de acceso con privilegios mínimos, hay que decidir qué acciones puede realizar un determinado tipo de usuario en cada uno de estos tres ámbitos.</span><span class="sxs-lookup"><span data-stu-id="1490c-163">Therefore, to create a model of least privilege access we have to decide the actions a particular type of user is allowed to take at each of these three scopes.</span></span> <span data-ttu-id="1490c-164">Por ejemplo, el requisito es que el propietario de una carga de trabajo tenga permiso para administrar el acceso únicamente a los recursos asociados con su carga de trabajo y no a otros.</span><span class="sxs-lookup"><span data-stu-id="1490c-164">For example, the requirement is for a workload owner to have permission to manage access to only the resources associated with their workload and no others.</span></span> <span data-ttu-id="1490c-165">Si quisiéramos asignar el [rol de propietario integrado][rbac-built-in-owner] en el ámbito de la suscripción, cada propietario de carga de trabajo tendría acceso de administración a todas las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-165">If we were to assign the [built-in owner role][rbac-built-in-owner] at the subscription scope, each workload owner would have management access to all workloads.</span></span>

<span data-ttu-id="1490c-166">Veamos dos ejemplos de modelos de permisos para entender este concepto algo mejor.</span><span class="sxs-lookup"><span data-stu-id="1490c-166">Let's take a look at two example permission models to understand this concept a little better.</span></span> <span data-ttu-id="1490c-167">En el primer ejemplo, el modelo confía solo en el administrador de servicios para crear grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-167">In the first example, the model trusts only the service administrator to create resource groups.</span></span> <span data-ttu-id="1490c-168">En el segundo ejemplo, el modelo asigna el rol de propietario integrado a cada propietario de carga de trabajo en el ámbito de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-168">In the second example, the model assigns the built-in owner role to each workload owner at the subscription scope.</span></span> 

<span data-ttu-id="1490c-169">En ambos ejemplos, tenemos un administrador de servicios de suscripción al que se asigna el [rol de propietario integrado][rbac-built-in-owner] en el ámbito de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-169">In both examples, we have a subscription service administrator that is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope.</span></span> <span data-ttu-id="1490c-170">Recuerde que el [rol de propietario integrado][rbac-built-in-owner] concede todos los permisos, incluida la administración de acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-170">Recall that the [built-in owner role][rbac-built-in-owner] grants all permissions including the management of access to resources.</span></span>
<span data-ttu-id="1490c-171">![Administrador de servicios de suscripción con el rol de propietario](../_images/governance-2-1.png)
*Figura 3. Una suscripción con un administrador de servicios al que se asigna el rol de propietario integrado.*</span><span class="sxs-lookup"><span data-stu-id="1490c-171">![subscription service administrator with owner role](../_images/governance-2-1.png)
*Figure 3. A subscription with a service administrator assigned the built-in owner role.*</span></span> 

1. <span data-ttu-id="1490c-172">En el primer ejemplo, tenemos el **propietario de carga de trabajo A** sin ningún permiso en el ámbito de suscripción. De forma predeterminada, no tienen derechos de administración de acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-172">In the first example, we have **workload owner A** with no permissions at the subscription scope - they have no resource access management rights by default.</span></span> <span data-ttu-id="1490c-173">Este usuario quiere volver a implementar y administrar los recursos de su carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-173">This user wants to deploy and manage the resources for their workload.</span></span> <span data-ttu-id="1490c-174">Debe ponerse en contacto con el **administrador de servicios** para pedir la creación de un grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-174">They must contact the **service administrator** to request creation of a resource group.</span></span>
<span data-ttu-id="1490c-175">![el propietario de la carga de trabajo solicita la creación del grupo de recursos A](../_images/governance-2-2.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-175">![workload owner requests creation of resource group A](../_images/governance-2-2.png)</span></span>  

2. <span data-ttu-id="1490c-176">El **administrador de servicios** revisa la solicitud y crea el **grupo de recursos A**. En este momento, el **propietario de carga de trabajo A** aún no tiene permiso para hacer nada.</span><span class="sxs-lookup"><span data-stu-id="1490c-176">The **service administrator** reviews their request and creates **resource group A**. At this point, **workload owner A** still doesn't have permission to do anything.</span></span>
<span data-ttu-id="1490c-177">![el administrador de servicios crea el grupo de recursos A](../_images/governance-2-3.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-177">![service administrator creates resource group A](../_images/governance-2-3.png)</span></span>

3. <span data-ttu-id="1490c-178">El **administrador de servicios** agrega el **propietario de carga de trabajo A** al **grupo de recursos A** y le asigna el [rol de colaborador integrado](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="1490c-178">The **service administrator** adds **workload owner A** to **resource group A** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> <span data-ttu-id="1490c-179">El rol de colaborador concede todos los permisos en el **grupo de recursos A** excepto la administración de los permisos de acceso.</span><span class="sxs-lookup"><span data-stu-id="1490c-179">The contributor role grants all permissions on **resource group A** except managing access permission.</span></span>
<span data-ttu-id="1490c-180">![El administrador de servicios agrega el propietario de carga de trabajo A al grupo de recursos A](../_images/governance-2-4.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-180">![service administrator adds workload owner a to resource group a](../_images/governance-2-4.png)</span></span>

4. <span data-ttu-id="1490c-181">Supongamos que el **propietario de carga de trabajo A** necesita que un par de miembros del equipo vean los datos de supervisión del tráfico de red y la CPU como parte de la planeación de la capacidad para la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-181">Let's assume that **workload owner A** has a requirement for a pair of team members to view the CPU and network traffic monitoring data as part of capacity planning for the workload.</span></span> <span data-ttu-id="1490c-182">Dado que el **propietario de carga de trabajo A** tiene asignado el rol de colaborador, no tiene permiso para agregar un usuario al **grupo de recursos A**. Debe enviar esta solicitud al **administrador de servicios**.</span><span class="sxs-lookup"><span data-stu-id="1490c-182">Because **workload owner A** is assigned the contributor role, they do not have permission to add a user to **resource group A**. They must send this request to the **service administrator**.</span></span>
<span data-ttu-id="1490c-183">![el propietario de la carga de trabajo solicita que los colaboradores de carga de trabajo se añadan al grupo de recursos](../_images/governance-2-5.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-183">![workload owner requests workload contributors be added to resource group](../_images/governance-2-5.png)</span></span>

5. <span data-ttu-id="1490c-184">El **administrador de servicios** revisa la solicitud y agrega los dos usuarios **colaboradores de carga de trabajo** al **grupo de recursos A**. Ninguno de estos dos usuarios necesitan permiso para administrar los recursos, por lo que se les asigna el [rol de lector integrado](/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="1490c-184">The **service administrator** reviews the request, and adds the two **workload contributor** users to **resource group A**. Neither of these two users require permission to manage resources, so they are assigned the [built-in reader role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="1490c-185">![el administrador de servicios añade colaboradores de carga de trabajo al grupo de recursos A](../_images/governance-2-6.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-185">![service administrator adds workload contributors to resource group A](../_images/governance-2-6.png)</span></span>

6. <span data-ttu-id="1490c-186">El **propietario de carga de trabajo B** también necesita un grupo de recursos para incluir los recursos de su carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-186">Next, **workload owner B** also requires a resource group to contain the resources for their workload.</span></span> <span data-ttu-id="1490c-187">Al igual que con el **propietario de carga de trabajo A**, el **propietario de carga de trabajo B** inicialmente no tiene permisos para realizar ninguna acción en el ámbito de la suscripción, por lo que debe enviar una solicitud al **administrador de servicios**.</span><span class="sxs-lookup"><span data-stu-id="1490c-187">As with **workload owner A**, **workload owner B** initially does not have permission to take any action at the subscription scope so they must send a request to the **service administrator**.</span></span> 
<span data-ttu-id="1490c-188">![el propietario de carga de trabajo B solicita la creación del grupo de recursos B](../_images/governance-2-7.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-188">![workload owner B requests creation of resource group B](../_images/governance-2-7.png)</span></span>

7. <span data-ttu-id="1490c-189">El **administrador de servicios** revisa la solicitud y crea el **grupo de recursos B**. ![el administrador de servicios crea el grupo de recursos B](../_images/governance-2-8.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-189">The **service administrator** reviews the request and creates **resource group B**. ![Service Administrator creates resource group B](../_images/governance-2-8.png)</span></span>

8. <span data-ttu-id="1490c-190">El **administrador de servicios** agrega el **propietario de carga de trabajo B** al **grupo de recursos B** y le asigna el [rol de colaborador integrado](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span><span class="sxs-lookup"><span data-stu-id="1490c-190">The **service administrator** then adds **workload owner B** to **resource group B** and assigns the [built-in contributor role](https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor).</span></span> 
<span data-ttu-id="1490c-191">![El administrador de servicios agrega el propietario de carga de trabajo B al grupo de recursos B](../_images/governance-2-9.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-191">![Service Administrator adds Workload Owner B to resource group B](../_images/governance-2-9.png)</span></span>

<span data-ttu-id="1490c-192">En este momento, cada uno de los propietarios de carga de trabajo está aislado en su propio grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-192">At this point, each of the workload owners is isolated in their own resource group.</span></span> <span data-ttu-id="1490c-193">Ninguno de los propietarios de carga de trabajo ni los miembros del equipo tienen acceso administrativo a los recursos de otros grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-193">None of the workload owners or their team members have management access to the resources in any other resource group.</span></span> 

<span data-ttu-id="1490c-194">![suscripción con los grupos de recursos A y B](../_images/governance-2-10.png)
*Figura 4. Una suscripción con dos propietarios de carga de trabajo aislados con sus propios grupos de recursos.*</span><span class="sxs-lookup"><span data-stu-id="1490c-194">![subscription with resource groups A and B](../_images/governance-2-10.png)
*Figure 4. A subscription with two workload owners isolated with their own resource group.*</span></span>

<span data-ttu-id="1490c-195">Este modelo es un modelo de privilegios mínimos; a cada usuario se le asigna los permisos correctos en el ámbito de administración de recursos correcto.</span><span class="sxs-lookup"><span data-stu-id="1490c-195">This model is a least privilege model - each user is assigned the correct permission at the correct resource management scope.</span></span>

<span data-ttu-id="1490c-196">Sin embargo, tenga en cuenta que todas las tareas del ejemplo las realizó el **administrador de servicios**.</span><span class="sxs-lookup"><span data-stu-id="1490c-196">However, consider that every task in this example was performed by the **service administrator**.</span></span> <span data-ttu-id="1490c-197">Este es un ejemplo sencillo y quizás esto no parezca un problema porque hay solo dos propietarios de cargas de trabajo, pero es fácil imaginar los tipos de problemas que habría en una organización grande.</span><span class="sxs-lookup"><span data-stu-id="1490c-197">While this is a simple example and may not appear to be an issue because there were only two workload owners, it's easy to imagine the types of issues that would result for a large organization.</span></span> <span data-ttu-id="1490c-198">Por ejemplo, el **administrador de servicios** puede convertirse en un cuello de botella con muchas solicitudes acumuladas que, como resultado, producen retrasos.</span><span class="sxs-lookup"><span data-stu-id="1490c-198">For example, the **service administrator** can become a bottleneck with a large backlog of requests that result in delays.</span></span>  

<span data-ttu-id="1490c-199">Veamos otro ejemplo que reduce el número de tareas realizadas por el **administrador de servicios**.</span><span class="sxs-lookup"><span data-stu-id="1490c-199">Let's take a look at second example that reduces the number of tasks performed by the **service administrator**.</span></span> 

1. <span data-ttu-id="1490c-200">En este modelo, al **propietario de carga de trabajo A** se le asigna el [rol de propietario integrado][rbac-built-in-owner] en el ámbito de la suscripción, lo que le permite crear su propio grupo de recursos: **grupo de recursos A**. ![El administrador de servicios agrega el propietario de carga de trabajo A a la suscripción](../_images/governance-2-11.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-200">In this model, **workload owner A** is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope, enabling them to create their own resource group: **resource group A**. ![Service Administrator adds Workload Owner A to subscription](../_images/governance-2-11.png)</span></span>

2. <span data-ttu-id="1490c-201">Cuando se crea el **grupo de recursos A**, se agrega el **propietario de carga de trabajo A** de forma predeterminada y hereda el [rol de propietario integrado][rbac-built-in-owner] del ámbito de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-201">When **resource group A** is created, **workload owner A** is added by default and inherits the [built-in owner][rbac-built-in-owner] role from the subscription scope.</span></span>
<span data-ttu-id="1490c-202">![El propietario de carga de trabajo A crea el grupo de recursos A](../_images/governance-2-12.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-202">![Workload Owner A creates resource group A](../_images/governance-2-12.png)</span></span>

3. <span data-ttu-id="1490c-203">El [rol de propietario integrado][rbac-built-in-owner] concede al **propietario de carga de trabajo A** permisos para administrar el acceso al grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-203">The [built-in owner role][rbac-built-in-owner] grants **workload owner A** permission to manage access to the resource group.</span></span> <span data-ttu-id="1490c-204">El **propietario de carga de trabajo A** agrega dos **colaboradores de carga de trabajo** y asigna el [rol de lector integrado][rbac-built-in-owner] a cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="1490c-204">**Workload owner A** adds two **workload contributors** and assigns the [built-in reader role][rbac-built-in-owner] to each of them.</span></span> 
<span data-ttu-id="1490c-205">![El propietario de carga de trabajo A agrega colaboradores de carga de trabajo](../_images/governance-2-13.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-205">![Workload Owner A adds Workload Contributors](../_images/governance-2-13.png)</span></span>

4. <span data-ttu-id="1490c-206">Ahora, el **administrador de servicios** agrega el **propietario de carga de trabajo B** a la suscripción con el rol de propietario integrado.</span><span class="sxs-lookup"><span data-stu-id="1490c-206">**Service administrator** now adds **workload owner B** to the subscription with the built-in owner role.</span></span> 
<span data-ttu-id="1490c-207">![El administrador de servicios agrega el propietario de carga de trabajo B a la suscripción](../_images/governance-2-14.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-207">![Service Administrator adds Workload Owners B to subscription](../_images/governance-2-14.png)</span></span>

5. <span data-ttu-id="1490c-208">El **propietario de carga de trabajo B** crea el **grupo de recursos B** y se agrega de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="1490c-208">**Workload owner B** creates **resource group B** and is added by default.</span></span> <span data-ttu-id="1490c-209">Una vez más, el **propietario de carga de trabajo B** hereda el rol de propietario integrado del ámbito de la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-209">Again, **workload owner B** inherits the built-in owner role from the subscription scope.</span></span>
<span data-ttu-id="1490c-210">![El propietario de carga de trabajo B crea el grupo de recursos B](../_images/governance-2-15.png)</span><span class="sxs-lookup"><span data-stu-id="1490c-210">![Workload Owner B creates resource group B](../_images/governance-2-15.png)</span></span>

<span data-ttu-id="1490c-211">Tenga en cuenta que, en este modelo, el **administrador de servicios** realizó menos acciones que en el primer ejemplo debido a que se delegó la administración del acceso a cada uno de los propietarios de carga de trabajo individuales.</span><span class="sxs-lookup"><span data-stu-id="1490c-211">Note that in this model, the **service administrator** performed fewer actions than they did in the first example due to the delegation of management access to each of the individual workload owners.</span></span>

<span data-ttu-id="1490c-212">![suscripción con los grupos de recursos A y B](../_images/governance-2-16.png)
*Figura 5. Una suscripción con un administrador de servicios y dos propietarios de carga de trabajo a los que se asigna el rol de propietario integrado.*</span><span class="sxs-lookup"><span data-stu-id="1490c-212">![subscription with resource groups A and B](../_images/governance-2-16.png)
*Figure 5. A subscription with a service administrator and two workload owners, all assigned the built-in owner role.*</span></span>

<span data-ttu-id="1490c-213">Sin embargo, como el **propietario de carga de trabajo A** y el **propietario de carga de trabajo B** tienen asignado el rol de propietario integrado en el ámbito de la suscripción, han heredado el rol de propietario integrado del grupo de recursos del otro.</span><span class="sxs-lookup"><span data-stu-id="1490c-213">However, because both **workload owner A** and **workload owner B** are assigned the built-in owner role at the subscription scope, they have each inherited the built-in owner role for each other's resource group.</span></span> <span data-ttu-id="1490c-214">Esto significa que no solo tienen acceso total a los recursos del otro, también pueden delegar el acceso administrativo a los grupos de recursos del otro.</span><span class="sxs-lookup"><span data-stu-id="1490c-214">This means that not only do they have full access to one another's resources, they are also able to delegate management access to each other's resource groups.</span></span> <span data-ttu-id="1490c-215">Por ejemplo, el **propietario de carga de trabajo B** tiene derechos para agregar otros usuarios al **grupo de recursos A** y puede asignarles cualquier rol, como el rol de propietario integrado.</span><span class="sxs-lookup"><span data-stu-id="1490c-215">For example, **workload owner B** has rights to add any other user to **resource group A** and can assign any role to them, including the built-in owner role.</span></span>

<span data-ttu-id="1490c-216">Si comparamos cada ejemplo con los requisitos, vemos que ambos ejemplos admiten un único usuario de confianza en el ámbito de la suscripción con permisos para conceder derechos de acceso a los recursos a los dos propietarios de carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-216">If we compare each example to the requirements, we see that both examples support a single trusted user at the subscription scope with permission to grant resource access rights to the two workload owners.</span></span> <span data-ttu-id="1490c-217">Ninguno de los dos propietarios de carga de trabajo tenía acceso a la administración de recursos de forma predeterminada y necesitaron que el **administrador de servicios** les asignara los permisos explícitamente.</span><span class="sxs-lookup"><span data-stu-id="1490c-217">Each of the two workload owners did not have access to resource management by default and required the **service administrator** to explicitly assign permissions to them.</span></span> <span data-ttu-id="1490c-218">Sin embargo, solo el primer ejemplo admite que los recursos asociados a cada carga de trabajo estén aislados entre sí de manera que ningún propietario de carga de trabajo tenga acceso a los recursos de otras cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-218">However, only the first example supports the requirement that the resources associated with each workload are isolated from one another such that no workload owner has access to the resources of any other workload.</span></span>

## <a name="resource-management-model"></a><span data-ttu-id="1490c-219">Modelo de administración de recursos</span><span class="sxs-lookup"><span data-stu-id="1490c-219">Resource management model</span></span>

<span data-ttu-id="1490c-220">Ahora que hemos diseñado un modelo de permisos con privilegios mínimos, vamos a ver algunas aplicaciones prácticas de estos modelos de gobierno.</span><span class="sxs-lookup"><span data-stu-id="1490c-220">Now that we've designed a permissions model of least privilege, let's move on to take a look at some practical applications of these governance models.</span></span> <span data-ttu-id="1490c-221">Recuerde que los requisitos son que debemos admitir los siguientes tres entornos:</span><span class="sxs-lookup"><span data-stu-id="1490c-221">Recall from the requirements that we must support the following three environments:</span></span>
1. <span data-ttu-id="1490c-222">**Infraestructura compartida:** un único grupo de recursos compartidos por todas las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-222">**Shared infrastructure:** a single group of resources shared by all workloads.</span></span> <span data-ttu-id="1490c-223">Estos son recursos tales como puertas de enlace de red, firewalls y servicios de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1490c-223">These are resources such as network gateways, firewalls, and security services.</span></span>  
2. <span data-ttu-id="1490c-224">**Desarrollo:** varios grupos de recursos que representan varias cargas de trabajo que no están listas para producción.</span><span class="sxs-lookup"><span data-stu-id="1490c-224">**Development:** multiple groups of resources representing multiple non-production ready workloads.</span></span> <span data-ttu-id="1490c-225">Estos recursos se utilizan para pruebas de concepto, pruebas y otras actividades de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="1490c-225">These resources are used for proof-of-concept, testing, and other developer activities.</span></span> <span data-ttu-id="1490c-226">Estos recursos pueden tener un modelo de gobierno más flexible para ofrecer más agilidad a los desarrolladores.</span><span class="sxs-lookup"><span data-stu-id="1490c-226">These resources may have a more relaxed governance model to enable increased developer agility.</span></span>
3. <span data-ttu-id="1490c-227">**Producción:** varios grupos de recursos que representan varias cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-227">**Production:** multiple groups of resources representing multiple production workloads.</span></span> <span data-ttu-id="1490c-228">Estos recursos se utilizan para hospedar los artefactos de aplicación de acceso privado y público.</span><span class="sxs-lookup"><span data-stu-id="1490c-228">These resources are used to host the private and public facing application artifacts.</span></span> <span data-ttu-id="1490c-229">Estos recursos normalmente tienen un gobierno y modelos de seguridad más estrictos para proteger los recursos, el código de la aplicación y los datos contra accesos no autorizados.</span><span class="sxs-lookup"><span data-stu-id="1490c-229">These resources typically have the tightest governance and security models to protect the resources, application code, and data from unauthorized access.</span></span>

<span data-ttu-id="1490c-230">En cada uno de estos tres entornos, necesitamos realizar el seguimiento de los datos de costo por **propietario de carga de trabajo**, **entorno** o ambos.</span><span class="sxs-lookup"><span data-stu-id="1490c-230">For each of these three environments, we have a requirement to track cost data by **workload owner**, **environment**, or both.</span></span> <span data-ttu-id="1490c-231">Es decir, queremos saber el costo actual de la **infraestructura compartida**, los costos en los que incurren las personas tanto en el entorno de **desarrollo** como de **producción** y, por último, el costo total de **desarrollo** y **producción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-231">That is, we want to know the ongoing cost of the **shared infrastructure**, the costs incurred by individuals in both the **development** and **production** environments, and finally the overall cost of **development** and **production**.</span></span> 

<span data-ttu-id="1490c-232">Ya ha aprendido que el ámbito de los recursos se establece en dos niveles: **suscripción** y **grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="1490c-232">You have already learned that resources are scoped to two levels: **subscription** and **resource group**.</span></span> <span data-ttu-id="1490c-233">Por lo tanto, la primera decisión es cómo organizar los entornos por **suscripción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-233">Therefore, the first decision is how to organize environments by **subscription**.</span></span> <span data-ttu-id="1490c-234">Hay solo dos posibilidades: una sola suscripción o varias suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-234">There are only two possibilities: a single subscription, or, multiple subscriptions.</span></span> 

<span data-ttu-id="1490c-235">Antes de adentrarnos en los ejemplos de cada uno de estos modelos, revisemos la estructura de administración de las suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-235">Before we look at examples of each of these models, let's review the management structure for subscriptions in Azure.</span></span> 

<span data-ttu-id="1490c-236">Recuerde que necesitamos tener una persona en la organización que sea responsable de las suscripciones y que este usuario tiene la cuenta de **propietario de la suscripción** en el inquilino de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1490c-236">Recall from the requirements that we have an individual in the organization who is responsible for subscriptions, and this user owns the **subscription owner** account in the Azure AD tenant.</span></span> <span data-ttu-id="1490c-237">Sin embargo, esta cuenta no tiene permisos para crear suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-237">However, this account does not have permission to create subscriptions.</span></span> <span data-ttu-id="1490c-238">Solo el **propietario de la cuenta de Azure** tiene permisos para hacerlo: ![](../_images/governance-3-0b.png)
*Figura 6. El propietario de una cuenta de Azure crea una suscripción.*</span><span class="sxs-lookup"><span data-stu-id="1490c-238">Only the **Azure Account Owner** has permission to do this: ![](../_images/governance-3-0b.png)
*Figure 6. An Azure Account Owner creates a subscription.*</span></span>

<span data-ttu-id="1490c-239">Una vez creada la suscripción, el **propietario de la cuenta de Azure** puede agregar la cuenta de **propietario de la suscripción** a la suscripción con el rol de **propietario**:</span><span class="sxs-lookup"><span data-stu-id="1490c-239">Once the subscription has been created, the **Azure Account Owner** can add the **subscription owner** account to the subscription with the **owner** role:</span></span>

<span data-ttu-id="1490c-240">![](../_images/governance-3-0c.png)
*Figura 7. El propietario de la cuenta de Azure agrega la cuenta de usuario de **propietario de la suscripción** a la suscripción con el rol de **propietario**.*</span><span class="sxs-lookup"><span data-stu-id="1490c-240">![](../_images/governance-3-0c.png)
*Figure 7. The Azure Account Owner adds the **subscription owner** user account to the subscription with the **owner** role.*</span></span>

<span data-ttu-id="1490c-241">Ahora, el **propietario de la suscripción** puede crear **grupos de recursos** y delegar la administración del acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-241">The **subscription owner** can now create **resource groups** and delegate resource access management.</span></span>

<span data-ttu-id="1490c-242">Veamos primero un ejemplo de un modelo de administración de recursos con una sola suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-242">First let's look at an example resource management model using a single subscription.</span></span> <span data-ttu-id="1490c-243">La primera decisión es cómo alinear los grupos de recursos con los tres entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-243">The first decision is how to align resource groups to the three environments.</span></span> <span data-ttu-id="1490c-244">Tenemos dos opciones:</span><span class="sxs-lookup"><span data-stu-id="1490c-244">We have two options:</span></span>
1. <span data-ttu-id="1490c-245">Alinear cada entorno con un único grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-245">Align each environment to a single resource group.</span></span> <span data-ttu-id="1490c-246">Todos los recursos de la infraestructura compartida se implementan en un único grupo de recursos de la **infraestructura compartida**.</span><span class="sxs-lookup"><span data-stu-id="1490c-246">All shared infrastructure resources are deployed to a single **shared infrastructure** resource group.</span></span> <span data-ttu-id="1490c-247">Todos los recursos asociados con las cargas de trabajo de desarrollo se implementan en un único grupo de recursos de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-247">All resources associated with development workloads are deployed to a single **development** resource group.</span></span> <span data-ttu-id="1490c-248">Todos los recursos asociados con las cargas de trabajo de producción se implementan en un solo grupo de recursos de **producción** para el entorno de **producción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-248">All resources associated with production workloads are deployed into a single **production** resource group for the **production** environment.</span></span> 
2. <span data-ttu-id="1490c-249">Crear grupos de recursos independientes para cada carga de trabajo, utilizando una convención de nomenclatura y etiquetas para alinear los grupos de recursos con cada uno de los tres entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-249">Create separate resource groups for each workload, using a naming convention and tags to align resource groups with each of the three environments.</span></span>  

<span data-ttu-id="1490c-250">Comencemos evaluando la primera opción.</span><span class="sxs-lookup"><span data-stu-id="1490c-250">Let's begin by evaluating the first option.</span></span> <span data-ttu-id="1490c-251">Vamos a usar el modelo de permisos que analizamos en la sección anterior, con un único administrador de servicios de la suscripción que crea los grupos de recursos y agrega los usuarios a ellos con el rol integrado de **colaborador** o **lector**.</span><span class="sxs-lookup"><span data-stu-id="1490c-251">We'll be using the permissions model that we discussed in the previous section, with a single subscription service administrator who creates resource groups and adds users to them with either the built-in **contributor** or **reader** role.</span></span> 

1. <span data-ttu-id="1490c-252">El primer grupo de recursos implementado representa el entorno de **infraestructura compartida**.</span><span class="sxs-lookup"><span data-stu-id="1490c-252">The first resource group deployed represents the **shared infrastructure** environment.</span></span> <span data-ttu-id="1490c-253">El **propietario de la suscripción** crea un grupo de recursos para los recursos de la infraestructura compartida llamado **netops-shared-rg**.</span><span class="sxs-lookup"><span data-stu-id="1490c-253">The **subscription owner** creates a resource group for the shared infrastructure resources named **netops-shared-rg**.</span></span> 
![](../_images/governance-3-0d.png)
2. <span data-ttu-id="1490c-254">El **propietario de la suscripción** agrega la cuenta del **usuario de operaciones de red** al grupo de recursos y le asigna el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-254">The **subscription owner** adds the **network operations user** account to the resource group and assigns the **contributor** role.</span></span> 
![](../_images/governance-3-0e.png)
3. <span data-ttu-id="1490c-255">El **usuario de operaciones de red** crea una [puerta de enlace VPN](/azure/vpn-gateway/vpn-gateway-about-vpngateways) y la configura para que se conecte al dispositivo VPN local.</span><span class="sxs-lookup"><span data-stu-id="1490c-255">The **network operations user** creates a [VPN gateway](/azure/vpn-gateway/vpn-gateway-about-vpngateways) and configures it to connect to the on-premises VPN appliance.</span></span> <span data-ttu-id="1490c-256">El **usuario de operaciones de red** también aplica un par de [etiquetas](/azure/azure-resource-manager/resource-group-using-tags) a cada uno de los recursos: *environment:shared* y *managedBy:netOps*.</span><span class="sxs-lookup"><span data-stu-id="1490c-256">The **network operations** user also applies a pair of [tags](/azure/azure-resource-manager/resource-group-using-tags) to each of the resources: *environment:shared* and *managedBy:netOps*.</span></span> <span data-ttu-id="1490c-257">Cuando el **administrador de servicios de suscripción** exporta un informe de costos, los costos se alinearán con cada una de estas etiquetas.</span><span class="sxs-lookup"><span data-stu-id="1490c-257">When the **subscription service administrator** exports a cost report, costs will be aligned with each of these tags.</span></span> <span data-ttu-id="1490c-258">Esto permite al **administrador de servicios de suscripción** dinamizar los costos con las etiquetas *environment* y *managedBy*.</span><span class="sxs-lookup"><span data-stu-id="1490c-258">This allows the **subscription service administrator** to pivot costs using the *environment* tag and the *managedBy* tag.</span></span> <span data-ttu-id="1490c-259">Observe el contador **límites de recursos** en la parte superior derecha de la ilustración.</span><span class="sxs-lookup"><span data-stu-id="1490c-259">Notice the **resource limits** counter at the top right-hand side of the figure.</span></span> <span data-ttu-id="1490c-260">Cada suscripción de Azure tiene [límites de servicio](/azure/azure-subscription-service-limits) y, para ayudarle a comprender el efecto de estos límites, seguiremos los límites de redes virtuales para cada suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-260">Each Azure subscription has [service limits](/azure/azure-subscription-service-limits), and to help you understand the effect of these limits we'll follow the virtual network limit for each subscription.</span></span> <span data-ttu-id="1490c-261">Hay un límite predeterminado de 50 redes virtuales por suscripción y, después de implementar la primera red virtual, quedan 49 disponibles.</span><span class="sxs-lookup"><span data-stu-id="1490c-261">There is a default limit of 50 virtual networks per subscription, and after the first virtual network is deployed there are now 49 available.</span></span>
![](../_images/governance-3-1.png)
4. <span data-ttu-id="1490c-262">Se implementan dos grupos de recursos más; el primero se llama *prod-rg*.</span><span class="sxs-lookup"><span data-stu-id="1490c-262">Two more resource groups are deployed, the first is named *prod-rg*.</span></span> <span data-ttu-id="1490c-263">Este grupo de recursos se alinea con el entorno de **producción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-263">This resource group is aligned with the **production** environment.</span></span> <span data-ttu-id="1490c-264">El segundo se llama *dev-rg* y se alinea con el entorno de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-264">The second is named *dev-rg* and is aligned with the **development** environment.</span></span> <span data-ttu-id="1490c-265">Todos los recursos asociados con las cargas de trabajo de producción se implementan en el entorno de **producción** y todos los recursos asociados con las cargas de trabajo de desarrollo se implementan en el entorno de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-265">All resources associated with production workloads are deployed to the **production** environment and all resources associated with development workloads are deployed to the **development** environment.</span></span> <span data-ttu-id="1490c-266">En este ejemplo solo implementaremos dos cargas de trabajo en cada uno de estos dos entornos, por lo que no encontraremos ningún límite del servicio de suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-266">In this example we'll only deploy two workloads to each of these two environments so we won't encounter any Azure subscription service limits.</span></span> <span data-ttu-id="1490c-267">Sin embargo, es importante tener en cuenta que cada grupo de recursos tiene un límite de 800 recursos por grupo.</span><span class="sxs-lookup"><span data-stu-id="1490c-267">However, it's important to consider that each resource group has a limit of 800 resources per resource group.</span></span> <span data-ttu-id="1490c-268">Por lo tanto, si seguimos agregando cargas de trabajo a cada grupo de recursos, es posible que se alcance este límite.</span><span class="sxs-lookup"><span data-stu-id="1490c-268">Therefore, if we keep adding workloads to each resource group it is possible that this limit will be reached.</span></span> 
![](../_images/governance-3-2.png)
5. <span data-ttu-id="1490c-269">El primer **propietario de carga de trabajo** envía una solicitud al **administrador de servicios de suscripción** y se agrega a cada uno de los grupos de recursos de los entornos de **desarrollo** y **producción** con el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-269">The first **workload owner** sends a request to the **subscription service administrator** and is added to each of the **development** and **production** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="1490c-270">Tal y como hemos visto, el rol de **colaborador** permite al usuario realizar cualquier operación distinta de la asignación de un rol a otro usuario.</span><span class="sxs-lookup"><span data-stu-id="1490c-270">As you learned earlier, the **contributor** role allows the user to perform any operation other than assigning a role to another user.</span></span> <span data-ttu-id="1490c-271">Ahora, el primer **propietario de carga de trabajo** puede crear los recursos asociados con la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-271">The first **workload owner** can now create the resources associated with their workload.</span></span>
![](../_images/governance-3-3.png)
6. <span data-ttu-id="1490c-272">El primer **propietario de carga de trabajo** crea una red virtual en cada uno de los dos grupos de recursos con un par de máquinas virtuales en cada una.</span><span class="sxs-lookup"><span data-stu-id="1490c-272">The first **workload owner** creates a virtual network in each of the two resource groups with a pair of virtual machines in each.</span></span> <span data-ttu-id="1490c-273">El primer **propietario de carga de trabajo** aplica las etiquetas *environment* y *managedBy* a todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-273">The first **workload owner** applies the *environment* and *managedBy* tags to all resources.</span></span> <span data-ttu-id="1490c-274">Tenga en cuenta que el contador de límite de servicio de Azure ahora está en 47 redes virtuales restantes.</span><span class="sxs-lookup"><span data-stu-id="1490c-274">Note that the Azure service limit counter is now at 47 virtual networks remaining.</span></span>
![](../_images/governance-3-4.png)
7. <span data-ttu-id="1490c-275">Ninguna de las redes virtuales tiene conectividad local cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="1490c-275">Each of the virtual networks does not have connectivity to on-premises when they are created.</span></span> <span data-ttu-id="1490c-276">En este tipo de arquitectura, se debe emparejar cada red virtual con la red virtual *hub-vnet* en el entorno de la **infraestructura compartida**.</span><span class="sxs-lookup"><span data-stu-id="1490c-276">In this type of architecture, each virtual network must be peered to the *hub-vnet* in the **shared infrastructure** environment.</span></span> <span data-ttu-id="1490c-277">El emparejamiento de redes virtuales crea una conexión entre dos redes virtuales diferentes y permite que el tráfico de red viaje entre ellas.</span><span class="sxs-lookup"><span data-stu-id="1490c-277">Virtual network peering creates a connection between two separate virtual networks and allows network traffic to travel between them.</span></span> <span data-ttu-id="1490c-278">Tenga en cuenta que el emparejamiento de redes virtuales no es intrínsecamente transitivo.</span><span class="sxs-lookup"><span data-stu-id="1490c-278">Note that virtual network peering is not inherently transitive.</span></span> <span data-ttu-id="1490c-279">Un emparejamiento debe especificarse entre las dos redes virtuales que están conectadas y, si solo una de las redes virtuales especifica un emparejamiento, la conexión está incompleta.</span><span class="sxs-lookup"><span data-stu-id="1490c-279">A peering must be specified in each of the two virtual networks that are connected, and if only one of the virtual networks specifies a peering the connection is incomplete.</span></span> <span data-ttu-id="1490c-280">Para mostrar este efecto, el primer **propietario de carga de trabajo** especifica un emparejamiento entre **prod-vnet** y **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="1490c-280">To illustrate the effect of this, the first **workload owner** specifies a peering between **prod-vnet** and **hub-vnet**.</span></span> <span data-ttu-id="1490c-281">Se crea el primer emparejamiento, pero el tráfico no circula porque el emparejamiento complementario de **hub-vnet** a **prod-vnet** todavía no se ha especificado.</span><span class="sxs-lookup"><span data-stu-id="1490c-281">The first peering is created, but no traffic flows because the complementary peering from **hub-vnet** to **prod-vnet** has not yet been specified.</span></span> <span data-ttu-id="1490c-282">El primer **propietario de carga de trabajo** se pone en contacto con el usuario de **operaciones de red** y solicita esta conexión de emparejamiento complementaria.</span><span class="sxs-lookup"><span data-stu-id="1490c-282">The first **workload owner** contacts the **network operations** user and requests this complementary peering connection.</span></span>
![](../_images/governance-3-5.png)
8. <span data-ttu-id="1490c-283">El usuario de **operaciones de red** revisa la solicitud, la aprueba y luego especifica el emparejamiento en la configuración de **hub-vnet**.</span><span class="sxs-lookup"><span data-stu-id="1490c-283">The **network operations** user reviews the request, approves it, then specifies the peering in the settings for the **hub-vnet**.</span></span> <span data-ttu-id="1490c-284">La conexión de emparejamiento ya está completa y el tráfico de red circula entre las dos redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="1490c-284">The peering connection is now complete and network traffic flows between the two virtual networks.</span></span>
![](../_images/governance-3-6.png)
9. <span data-ttu-id="1490c-285">Ahora, el segundo **propietario de carga de trabajo** envía una solicitud al **administrador de servicios de suscripción** y se agrega a los grupos de recursos existentes en los entornos de **desarrollo** y **producción** con el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-285">Now, a second **workload owner** sends a request to the **subscription service administrator** and is added to the existing **production** and **development** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="1490c-286">El segundo **propietario de carga de trabajo** tiene los mismos permisos en todos los recursos que el primer **propietario de carga de trabajo** en cada grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-286">The second **workload owner** has the same permissions on all resources as the first **workload owner** in each resource group.</span></span> 
![](../_images/governance-3-7.png)
10. <span data-ttu-id="1490c-287">El segundo **propietario de carga de trabajo** crea una subred en la red virtual **prod-vnet** y luego agrega dos máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="1490c-287">The second **workload owner** creates a subnet in the **prod-vnet** virtual network, then adds two virtual machines.</span></span> <span data-ttu-id="1490c-288">El segundo **propietario de carga de trabajo** aplica las etiquetas *environment* y *managedBy* a todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-288">The second **workload owner** applies the *environment* and *managedBy* tags to each resource.</span></span>
![](../_images/governance-3-8.png) 

<span data-ttu-id="1490c-289">Este modelo de administración de recursos de ejemplo permite administrar los recursos en los tres entornos necesarios.</span><span class="sxs-lookup"><span data-stu-id="1490c-289">This example resource management model enables us to manage resources in the three required environments.</span></span> <span data-ttu-id="1490c-290">Los recursos de la infraestructura compartida están protegidos porque hay un único usuario en la suscripción con permisos para acceder a esos recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-290">The shared infrastructure resources are protected because there's only a single user in the subscription with permission to access those resources.</span></span> <span data-ttu-id="1490c-291">Cada uno de los propietarios de cargas de trabajo puede utilizar los recursos de la infraestructura compartida sin tener permisos en los recursos compartidos en sí.</span><span class="sxs-lookup"><span data-stu-id="1490c-291">Each of the workload owners is able to utilize the share infrastructure resources without having any permissions on the actual shared resources themselves.</span></span> <span data-ttu-id="1490c-292">Sin embargo, este modelo de administración no cumple el requisito de aislamiento de las cargas de trabajo; los dos **propietarios de cargas de trabajo** pueden acceder a los recursos de la otra carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-292">However, This management model fails the requirement for workload isolation - each of the two **workload owners** are able to access the resources of the other's workload.</span></span> 

<span data-ttu-id="1490c-293">Hay otra consideración importante con este modelo puede no resultar obvio a simple vista.</span><span class="sxs-lookup"><span data-stu-id="1490c-293">There's another important consideration with this model that may not be immediately obvious.</span></span> <span data-ttu-id="1490c-294">En el ejemplo, el **propietario de carga de trabajo app1** solicitó la conexión de emparejamiento de red con la red virtual **hub-vnet** para proporcionar conectividad al entorno local.</span><span class="sxs-lookup"><span data-stu-id="1490c-294">In the example, it was **app1 workload owner** that requested the network peering connection with the **hub-vnet** to provide connectivity to on-premises.</span></span> <span data-ttu-id="1490c-295">El usuario de **operaciones de red** evaluó la solicitud según los recursos implementados con esa carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-295">The **network operations** user evaluated that request based on the resources deployed with that workload.</span></span> <span data-ttu-id="1490c-296">Cuando el **propietario de la suscripción** agregó al **propietario de carga de trabajo app2** con el rol de **colaborador**, ese usuario tenía derechos de acceso de administración a todos los recursos del grupo de recursos **prod-rg**.</span><span class="sxs-lookup"><span data-stu-id="1490c-296">When the **subscription owner** added **app2 workload owner** with the **contributor** role, that user had management access rights to all resources in the **prod-rg** resource group.</span></span> 

![](../_images/governance-3-10.png)

<span data-ttu-id="1490c-297">Esto significa que el **propietario de carga de trabajo app2** tenía permisos para implementar su propia subred con máquinas virtuales en la red virtual **prod-vnet**.</span><span class="sxs-lookup"><span data-stu-id="1490c-297">This means **app2 workload owner** had permission to deploy their own subnet with virtual machines in the **prod-vnet** virtual network.</span></span> <span data-ttu-id="1490c-298">De forma predeterminada, esas máquinas virtuales ahora tienen acceso a la red local.</span><span class="sxs-lookup"><span data-stu-id="1490c-298">By default, those virtual machines now have access to the on-premises network.</span></span> <span data-ttu-id="1490c-299">El usuario de **operaciones de red** no es consciente de esas máquinas y no aprobó su conectividad al entorno local.</span><span class="sxs-lookup"><span data-stu-id="1490c-299">The **network operations** user is not aware of those machines and did not approve their connectivity to on-premises.</span></span>

<span data-ttu-id="1490c-300">Ahora, veamos a un única suscripción con varios grupos de recursos para diferentes entornos y cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-300">Next, let's look at a single subscription with multiple resources groups for different environments and workloads.</span></span> <span data-ttu-id="1490c-301">Tenga en cuenta que, en el ejemplo anterior, los recursos de cada entorno se podían identificar fácilmente porque estaban en el mismo grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-301">Note that in the previous example, the resources for each environment were easily identifiable because they were in the same resource group.</span></span> <span data-ttu-id="1490c-302">Ahora que ya no tenemos esa agrupación, tenemos que utilizar una convención de nomenclatura en el grupo de recursos para proporcionar esa funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="1490c-302">Now that we no longer have that grouping, we will have to rely on a resource group naming convention to provide that functionality.</span></span> 

1. <span data-ttu-id="1490c-303">Los recursos de la **infraestructura compartida** seguirán teniendo un grupo de recursos independiente en este modelo, por lo que esta parte sigue igual.</span><span class="sxs-lookup"><span data-stu-id="1490c-303">The **shared infrastructure** resources will still have a separate resource group in this model, so that remains the same.</span></span> <span data-ttu-id="1490c-304">Cada carga de trabajo requiere dos grupos de recursos: uno para cada uno de los entornos de **desarrollo** y **producción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-304">Each workload requires two resource groups - one for each of the **development** and **production** environments.</span></span> <span data-ttu-id="1490c-305">Para la primera carga de trabajo, el **propietario de la suscripción** crea dos grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-305">For the first workload, the **subscription owner** creates two resource groups.</span></span> <span data-ttu-id="1490c-306">El primero se llama **app1-prod-rg** y el otro se llama **app1-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="1490c-306">The first is named **app1-prod-rg** and the second one is named **app1-dev-rg**.</span></span> <span data-ttu-id="1490c-307">Tal y como se indicó anteriormente, esta convención de nomenclatura identifica los recursos como asociados con la primera carga de trabajo, **app1**, y el entorno **dev** o **prod**.</span><span class="sxs-lookup"><span data-stu-id="1490c-307">As discussed earlier, this naming convention identifies the resources as being associated with the first workload, **app1**, and either the **dev** or **prod** environment.</span></span> <span data-ttu-id="1490c-308">Una vez más, el propietario de la *suscripción* agrega el **propietario de carga de trabajo app1** al grupo de recursos con el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-308">Again, the *subscription* owner adds **app1 workload owner** to the resource group with the **contributor** role.</span></span>
![](../_images/governance-3-12.png)
2. <span data-ttu-id="1490c-309">De forma similar al primer ejemplo, el **propietario de carga de trabajo app1** implementa una red virtual llamada **app1-prod-vnet** en el entorno de **producción** y otra llamada **app1-dev-vnet** en el entorno de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-309">Similar to the first example, **app1 workload owner** deploys a virtual network named **app1-prod-vnet** to the **production** environment, and another named **app1-dev-vnet** to the **development** environment.</span></span> <span data-ttu-id="1490c-310">Una vez más, el **propietario de carga de trabajo app1** envía una solicitud al usuario de **operaciones de red** para crear una conexión de emparejamiento.</span><span class="sxs-lookup"><span data-stu-id="1490c-310">Again, **app1 workload owner** sends a request to the **network operations** user to create a peering connection.</span></span> <span data-ttu-id="1490c-311">Tenga en cuenta que el **propietario de carga de trabajo app1** agrega las mismas etiquetas que en el primer ejemplo, y el límite de contadores se ha reducido a 47 redes virtuales disponibles en la suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-311">Note that **app1 workload owner** adds the same tags as in the first example, and the limit counter has been decremented to 47 virtual networks remaining in the subscription.</span></span>
![](../_images/governance-3-13.png)
3. <span data-ttu-id="1490c-312">El **propietario de la suscripción** ahora crea dos grupos de recursos para el **propietario de carga de trabajo app2**.</span><span class="sxs-lookup"><span data-stu-id="1490c-312">The **subscription owner** now creates two resource groups for **app2 workload owner**.</span></span> <span data-ttu-id="1490c-313">Siguiendo las mismas convenciones que para el **propietario de carga de trabajo app1**, los grupos de recursos se llaman **app2-prod-rg** y **app2-dev-rg**.</span><span class="sxs-lookup"><span data-stu-id="1490c-313">Following the same conventions as for **app1 workload owner**, the resource groups are named **app2-prod-rg** and **app2-dev-rg**.</span></span> <span data-ttu-id="1490c-314">El **propietario de la suscripción** agrega el **propietario de carga de trabajo app2** a cada uno de los grupos de recursos con el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-314">The **subscription owner** adds **app2 workload owner** to each of the resource groups with the **contributor** role.</span></span>
![](../_images/governance-3-14.png)
4. <span data-ttu-id="1490c-315">El *propietario de carga de trabajo app2* implementa las redes virtuales y las máquinas virtuales en los grupos de recursos con las mismas convenciones de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="1490c-315">*App2 workload owner* deploys virtual networks and virtual machines to the resource groups with the same naming conventions.</span></span> <span data-ttu-id="1490c-316">Se agregan las etiquetas y el contador de límite se ha reducido a 45 redes virtuales disponibles en la *suscripción*.</span><span class="sxs-lookup"><span data-stu-id="1490c-316">Tags are added and the limit counter has been decremented to 45 virtual networks remaining in the *subscription*.</span></span>
![](../_images/governance-3-15.png)
5. <span data-ttu-id="1490c-317">El *propietario de carga de trabajo app2* envía una solicitud al usuario de *operaciones de red* para emparejar la *app2-prod-vnet* con *hub-vnet*.</span><span class="sxs-lookup"><span data-stu-id="1490c-317">*App2 workload owner* sends a request to the *network operations* user to peer the *app2-prod-vnet* with the *hub-vnet*.</span></span> <span data-ttu-id="1490c-318">El usuario de *operaciones de red* crea la conexión de emparejamiento.</span><span class="sxs-lookup"><span data-stu-id="1490c-318">The *network operations* user creates the peering connection.</span></span>
![](../_images/governance-3-16.png)

<span data-ttu-id="1490c-319">El modelo de administración resultante es similar al primer ejemplo, con algunas diferencias importantes:</span><span class="sxs-lookup"><span data-stu-id="1490c-319">The resulting management model is similar to the first example, with several key differences:</span></span>
* <span data-ttu-id="1490c-320">Cada una de las dos cargas de trabajo se aísla por carga de trabajo y por entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-320">Each of the two workloads is isolated by workload and by environment.</span></span>
* <span data-ttu-id="1490c-321">Este modelo requiere dos redes virtuales más que el primer ejemplo de modelo.</span><span class="sxs-lookup"><span data-stu-id="1490c-321">This model required two more virtual networks than the first example model.</span></span> <span data-ttu-id="1490c-322">Aunque esto no supone mucha diferencia cuando solo hay dos cargas de trabajo, el límite teórico en el número de cargas de trabajo en este modelo es 24.</span><span class="sxs-lookup"><span data-stu-id="1490c-322">While this is not an important distinction with only two workloads, the theoretical limit on the number of workloads for this model is 24.</span></span> 
* <span data-ttu-id="1490c-323">Los recursos ya no se agrupan en un único grupo de recursos para cada entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-323">Resources are no longer grouped in a single resource group for each environment.</span></span> <span data-ttu-id="1490c-324">Para agrupar los recursos es necesario conocer las convenciones de nomenclatura que se usan en cada entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-324">Grouping resources requires an understanding of the naming conventions used for each environment.</span></span> 
* <span data-ttu-id="1490c-325">El usuario de *operaciones de red* ha revisado y aprobado cada una de las conexiones de emparejamiento de red virtual.</span><span class="sxs-lookup"><span data-stu-id="1490c-325">Each of the peered virtual network connections was reviewed and approved by the *network operations* user.</span></span>

<span data-ttu-id="1490c-326">Veamos ahora un ejemplo de un modelo de administración de recursos con varias suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-326">Now let's look at a resource management model using multiple subscriptions.</span></span> <span data-ttu-id="1490c-327">En este modelo, alinearemos cada uno de los tres entornos con una suscripción diferente: una suscripción de **servicios compartidos**, una suscripción de **producción** y, por último, una suscripción de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-327">In this model, we'll align each of the three environments to a separate subscription: a **shared services** subscription, **production** subscription, and finally a **development** subscription.</span></span> <span data-ttu-id="1490c-328">Las consideraciones para este modelo son similares a las del modelo con una sola suscripción en el sentido de que hay que decidir cómo alinear los grupos de recursos con las cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-328">The considerations for this model are similar to a model using a single subscription in that we have to decide how to align resource groups to workloads.</span></span> <span data-ttu-id="1490c-329">Ya hemos determinado que crear un grupo de recursos para cada carga de trabajo satisface el requisito de aislamiento de las cargas de trabajo, por lo que nos quedaremos con ese modelo en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="1490c-329">We've already determined that creating a resource group for each workload satisfies the workload isolation requirement, so we'll stick with that model in this example.</span></span>

1. <span data-ttu-id="1490c-330">En este modelo, hay tres *suscripciones*: *infraestructura compartida*, *producción* y *desarrollo*.</span><span class="sxs-lookup"><span data-stu-id="1490c-330">In this model, there are three *subscriptions*: *shared infrastructure*, *production*, and *development*.</span></span> <span data-ttu-id="1490c-331">Cada una de estas tres suscripciones requiere un *propietario de la suscripción* y, en el ejemplo sencillo, usaremos la misma cuenta de usuario para las tres.</span><span class="sxs-lookup"><span data-stu-id="1490c-331">Each of these three subscriptions requires a *subscription owner*, and in the simple example we'll use the same user account for all three.</span></span> <span data-ttu-id="1490c-332">Los recursos de la *infraestructura compartida* se administran de manera similar a los primeros dos ejemplos anteriores, y la primera carga de trabajo se asocia con *app1-rg* en el entorno de *producción* y el segundo grupo de recursos con el mismo nombre en el entorno de *desarrollo*.</span><span class="sxs-lookup"><span data-stu-id="1490c-332">The *shared infrastructure* resources are managed similarly to the first two examples above, and the first workload is associated with the *app1-rg* in the *production* environment and the same-named resource group in the *development* environment.</span></span> <span data-ttu-id="1490c-333">El *propietario de carga de trabajo app1* se agrega a cada uno de los grupos de recursos con el rol de *colaborador*.</span><span class="sxs-lookup"><span data-stu-id="1490c-333">The *app1 workload owner* is added to each of the resource group with the *contributor* role.</span></span> 
![](../_images/governance-3-17.png)
2. <span data-ttu-id="1490c-334">Al igual que en los ejemplos anteriores, el *propietario de carga de trabajo app1* crea los recursos y solicita la conexión de emparejamiento con la red virtual de la *infraestructura compartida*.</span><span class="sxs-lookup"><span data-stu-id="1490c-334">As with the earlier examples, *app1 workload owner* creates the resources and requests the peering connection with the *shared infrastructure* virtual network.</span></span> <span data-ttu-id="1490c-335">El *propietario de carga de trabajo app1* agrega solo la etiqueta *managedBy* porque ya no se necesita la etiqueta *environment*.</span><span class="sxs-lookup"><span data-stu-id="1490c-335">*App1 workload owner* adds only the *managedBy* tag because there is no longer a need for the *environment* tag.</span></span> <span data-ttu-id="1490c-336">Es decir, los recursos de cada entorno están agrupados en la misma *suscripción* y la etiqueta *environment* es redundante.</span><span class="sxs-lookup"><span data-stu-id="1490c-336">That is, resources are for each environment are now grouped in the same *subscription* and the *environment* tag is redundant.</span></span> <span data-ttu-id="1490c-337">El contador de límite se reduce a 49 redes virtuales disponibles.</span><span class="sxs-lookup"><span data-stu-id="1490c-337">The limit counter is decremented to 49 virtual networks remaining.</span></span>
![](../_images/governance-3-18.png)
3. <span data-ttu-id="1490c-338">Por último, el *propietario de la suscripción* repite el proceso para la segunda carga de trabajo, y agrega el *propietario de carga de trabajo app2* a los grupos de recursos con el rol de colaborador.</span><span class="sxs-lookup"><span data-stu-id="1490c-338">Finally, the *subscription owner* repeats the process for the second workload, adding the resource groups with the *app2 workload owner* in the \*contributor role.</span></span> <span data-ttu-id="1490c-339">El contador de límite para cada una de las suscripciones del entorno se reducido a 48 redes virtuales disponibles.</span><span class="sxs-lookup"><span data-stu-id="1490c-339">The limit counter for each of the environment subscriptions is decremented to 48 virtual networks remaining.</span></span> 

<span data-ttu-id="1490c-340">Este modelo de administración tiene las ventajas del segundo ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="1490c-340">This management model has the benefits of the second example above.</span></span> <span data-ttu-id="1490c-341">Sin embargo, la principal diferencia es que los límites suponen un problema menor porque se extienden a dos *suscripciones*.</span><span class="sxs-lookup"><span data-stu-id="1490c-341">However, the key difference is that limits are less of an issue due to the fact that they are spread over two *subscriptions*.</span></span> <span data-ttu-id="1490c-342">El inconveniente es que los datos de costos que se controlan con las etiquetas se deben agregar a las tres *suscripciones*.</span><span class="sxs-lookup"><span data-stu-id="1490c-342">The drawback is that the cost data tracked by tags must be aggregated across all three *subscriptions*.</span></span> 

<span data-ttu-id="1490c-343">Por lo tanto, puede seleccionar cualquiera de estos dos ejemplos de modelos de administración de recursos según la prioridad de sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="1490c-343">Therefore, you can select any of these two examples resource management models depending on the priority of your requirements.</span></span> <span data-ttu-id="1490c-344">Si prevé que su organización no llegará a los límites de servicio para una sola suscripción, puede utilizar una sola suscripción con varios grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-344">If you anticipate that your organization will not reach the service limits for a single subscription, you can use a single subscription with multiple resource groups.</span></span> <span data-ttu-id="1490c-345">Por el contrario, si su organización anticipa muchas cargas de trabajo, puede ser mejor tener varias suscripciones para cada entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-345">Conversely, if your organization anticipates many workloads, multiple subscriptions for each environment may be better.</span></span>

## <a name="implementing-the-resource-management-model"></a><span data-ttu-id="1490c-346">Implementación del modelo de administración de recursos</span><span class="sxs-lookup"><span data-stu-id="1490c-346">Implementing the resource management model</span></span>

<span data-ttu-id="1490c-347">Ha aprendido varios modelos diferentes para gobernar el acceso a los recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-347">You've learned about several different models for governing access to Azure resources.</span></span> <span data-ttu-id="1490c-348">Ahora veremos los pasos necesarios para implementar el modelo de administración de recursos con una suscripción para cada uno de los entornos de **infraestructura compartida**, **producción** y **desarrollo** con la guía de diseño.</span><span class="sxs-lookup"><span data-stu-id="1490c-348">Now we'll walk through the steps necessary to implement the resource management model with one subscription for each of the **shared infrastructure**, **production**, and **development** environments from the design guide.</span></span> <span data-ttu-id="1490c-349">Tendremos un **propietario de la suscripción** para los tres entornos.</span><span class="sxs-lookup"><span data-stu-id="1490c-349">We'll have one **subscription owner** for all three environments.</span></span> <span data-ttu-id="1490c-350">Cada carga de trabajo se aislará en un **grupo de recursos** y se agregará **propietario de carga de trabajo** con el rol de **colaborador**.</span><span class="sxs-lookup"><span data-stu-id="1490c-350">Each workload will be isolated in a **resource group** with a **workload owner** added with the **contributor** role.</span></span>

> [!NOTE]
> <span data-ttu-id="1490c-351">Lectura la [introducción al acceso a los recursos de Azure][understand-resource-access-in-azure] para obtener más información sobre la relación entre las cuentas y las suscripciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-351">Read [understanding resource access in Azure][understand-resource-access-in-azure] to learn more about the relationship between Azure Accounts and subscriptions.</span></span> 

<span data-ttu-id="1490c-352">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="1490c-352">Follow these steps:</span></span>

1. <span data-ttu-id="1490c-353">Cree una [cuenta de Azure](/azure/active-directory/sign-up-organization) si su organización aún no tiene una.</span><span class="sxs-lookup"><span data-stu-id="1490c-353">Create an [Azure account](/azure/active-directory/sign-up-organization) if your organization doesn't already have one.</span></span> <span data-ttu-id="1490c-354">La persona que se suscribe a la cuenta de Azure se convierte en el administrador de la cuenta de Azure y los responsables de su organización deben seleccionar la persona que asumirá este rol.</span><span class="sxs-lookup"><span data-stu-id="1490c-354">The person who signs up for the Azure account becomes the Azure account administrator, and your organization's leadership must select an individual to assume this role.</span></span> <span data-ttu-id="1490c-355">Esta persona será responsable de:</span><span class="sxs-lookup"><span data-stu-id="1490c-355">This individual will be responsible for:</span></span>
    * <span data-ttu-id="1490c-356">Crear suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-356">Creating subscriptions, and</span></span>
    * <span data-ttu-id="1490c-357">Crear y administrar los inquilinos de [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) que almacenan las identidades de usuario de esas suscripciones.</span><span class="sxs-lookup"><span data-stu-id="1490c-357">Creating and administering [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) tenants that store user identity for those subscriptions.</span></span>    
2. <span data-ttu-id="1490c-358">El equipo directivo de su organización decide qué personas son responsables de:</span><span class="sxs-lookup"><span data-stu-id="1490c-358">Your organization's leadership team decides which people are responsible for:</span></span>
    * <span data-ttu-id="1490c-359">Administrar las identidades de usuario; de forma predeterminada, se crea un [inquilino de Azure AD](/azure/active-directory/develop/active-directory-howto-tenant) cuando se crea la cuenta de Azure de su organización y el administrador de la cuenta se agrega como [administrador global de Azure AD](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role).</span><span class="sxs-lookup"><span data-stu-id="1490c-359">Management of user identity; an [Azure AD tenant](/azure/active-directory/develop/active-directory-howto-tenant) is created by default when your organization's Azure Account is created, and the account administrator is added as the [Azure AD global administrator](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role) by default.</span></span> <span data-ttu-id="1490c-360">Su organización puede elegir que otro usuario administre las identidades de usuario; para ello, puede [asignar el rol de administrador global de Azure AD para ese usuario](/azure/active-directory/active-directory-users-assign-role-azure-portal).</span><span class="sxs-lookup"><span data-stu-id="1490c-360">Your organization can choose another user to manage user identity by [assigning the Azure AD global administrator role to that user](/azure/active-directory/active-directory-users-assign-role-azure-portal).</span></span> 
    * <span data-ttu-id="1490c-361">Suscripciones, lo que significa que estos usuarios son responsables de:</span><span class="sxs-lookup"><span data-stu-id="1490c-361">Subscriptions, which means these users:</span></span>
        * <span data-ttu-id="1490c-362">Administrar los costos asociados con el uso de recursos en esa suscripción.</span><span class="sxs-lookup"><span data-stu-id="1490c-362">Manage costs associated with resource usage in that subscription,</span></span>
        * <span data-ttu-id="1490c-363">Implementar y mantener el modelo de permisos mínimos para el acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-363">Implement and maintain least permission model for resource access, and</span></span>
        * <span data-ttu-id="1490c-364">Realizar un seguimiento de los límites de servicio.</span><span class="sxs-lookup"><span data-stu-id="1490c-364">Keep track of service limits.</span></span>
    * <span data-ttu-id="1490c-365">Servicios de infraestructura compartida (si su organización decide usar este modelo), lo que significa que este usuario es responsable de:</span><span class="sxs-lookup"><span data-stu-id="1490c-365">Shared infrastructure services (if your organization decides to use this model), which means this user is responsible for:</span></span>
        * <span data-ttu-id="1490c-366">La conectividad del entorno local a la red de Azure.</span><span class="sxs-lookup"><span data-stu-id="1490c-366">On-premises to Azure network connectivity, and</span></span> 
        * <span data-ttu-id="1490c-367">La propiedad de la conectividad de red dentro de Azure mediante el emparejamiento de redes virtuales.</span><span class="sxs-lookup"><span data-stu-id="1490c-367">Ownership of network connectivity within Azure through virtual network peering.</span></span>
    * <span data-ttu-id="1490c-368">Propietarios de cargas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1490c-368">Workload owners.</span></span> 
3. <span data-ttu-id="1490c-369">El administrador global de Azure AD [crea las cuentas de usuario nuevas](/azure/active-directory/add-users-azure-active-directory) para:</span><span class="sxs-lookup"><span data-stu-id="1490c-369">The Azure AD global administrator [creates the new user accounts](/azure/active-directory/add-users-azure-active-directory) for:</span></span>
    * <span data-ttu-id="1490c-370">La persona que será el **propietario de la suscripción** para cada suscripción asociada con cada entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-370">The person who will be the **subscription owner** for each subscription associated with each environment.</span></span> <span data-ttu-id="1490c-371">Tenga en cuenta que esto es necesario solo si el **administrador de servicios** de la suscripción no será responsable de administrar el acceso a los recursos para cada suscripción o entorno.</span><span class="sxs-lookup"><span data-stu-id="1490c-371">Note that this is necessary only if the subscription **service administrator** will not be tasked with managing resource access for each subscription/environment.</span></span>
    * <span data-ttu-id="1490c-372">La persona que será el **usuario de operaciones de red**.</span><span class="sxs-lookup"><span data-stu-id="1490c-372">The person who will be the **network operations user**, and</span></span>
    * <span data-ttu-id="1490c-373">Las personas que serán **propietarios de cargas de trabajo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-373">The people who are **workload owner(s)**.</span></span>
4. <span data-ttu-id="1490c-374">El administrador de la cuenta de Azure crea las siguientes tres suscripciones con el [portal de cuentas de Azure](https://account.azure.com):</span><span class="sxs-lookup"><span data-stu-id="1490c-374">The Azure account administrator creates the following three subscriptions using the [Azure account portal](https://account.azure.com):</span></span>
    * <span data-ttu-id="1490c-375">Una suscripción para el entorno de **infraestructura compartida**.</span><span class="sxs-lookup"><span data-stu-id="1490c-375">A subscription for the **shared infrastructure** environment,</span></span>
    * <span data-ttu-id="1490c-376">Una suscripción para el entorno de **producción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-376">A subscription for the **production** environment, and</span></span> 
    * <span data-ttu-id="1490c-377">Una suscripción para el entorno de **desarrollo**.</span><span class="sxs-lookup"><span data-stu-id="1490c-377">A subscription for the **development** environment.</span></span> 
5. <span data-ttu-id="1490c-378">El administrador de la cuenta de Azure [agrega el propietario del servicio de suscripción a cada suscripción](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal).</span><span class="sxs-lookup"><span data-stu-id="1490c-378">The Azure account administrator [adds the subscription service owner to each subscription](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal).</span></span>
6. <span data-ttu-id="1490c-379">Cree un proceso de aprobación para que **propietarios de cargas de trabajo** soliciten la creación de grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-379">Create an approval process for **workload owners** to request the creation of resource groups.</span></span> <span data-ttu-id="1490c-380">El proceso de aprobación se puede implementar de muchas maneras, por ejemplo, por correo electrónico, o bien puede usar una herramienta de administración de procesos como [flujos de trabajo de Sharepoint](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3).</span><span class="sxs-lookup"><span data-stu-id="1490c-380">The approval process can be implemented in many ways, such as over email, or you can using a process management tool such as [Sharepoint workflows](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3).</span></span> <span data-ttu-id="1490c-381">El proceso de aprobación puede seguir estos pasos:</span><span class="sxs-lookup"><span data-stu-id="1490c-381">The approval process can follow these steps:</span></span>  
    * <span data-ttu-id="1490c-382">El **propietario de la carga de trabajo** prepara una lista de materiales de los recursos de Azure que necesita en el entorno de **desarrollo**, de **producción** o ambos, y la envía al **propietario de la suscripción**.</span><span class="sxs-lookup"><span data-stu-id="1490c-382">The **workload owner** prepares a bill of materials for required Azure resources in either the **development** environment, **production** environment, or both, and submits it to the **subscription owner**.</span></span>
    * <span data-ttu-id="1490c-383">El **propietario de la suscripción** revisa la lista de materiales y valida los recursos solicitados para asegurarse de que son los adecuados para el uso previsto; por ejemplo, comprueba que los [ tamaños de máquina virtual](/azure/virtual-machines/windows/sizes) solicitados son los correctos.</span><span class="sxs-lookup"><span data-stu-id="1490c-383">The **subscription owner** reviews the bill of materials and validates the requested resources to ensure that the requested resources are appropriate for their planned use - for example, checking that the requested [virtual machine sizes](/azure/virtual-machines/windows/sizes) are correct.</span></span>
    * <span data-ttu-id="1490c-384">Si no se aprueba la solicitud, el **propietario de la carga de trabajo** recibe una notificación.</span><span class="sxs-lookup"><span data-stu-id="1490c-384">If the request is not approved, the **workload owner** is notified.</span></span> <span data-ttu-id="1490c-385">Si se aprueba la solicitud, el **propietario de la suscripción** [crea el grupo de recursos solicitado](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups) según las [convenciones de nomenclatura](/azure/architecture/best-practices/naming-conventions) de la organización, [agrega el **propietario de carga de trabajo**](/azure/role-based-access-control/role-assignments-portal#add-access) con el rol de [**colaborador**](/azure/role-based-access-control/built-in-roles#contributor) y notifica al **propietario de carga de trabajo** que se ha creado el grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="1490c-385">If the request is approved, the **subscription owner** [creates the requested resource group](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups) following your organization's [naming conventions](/azure/architecture/best-practices/naming-conventions), [adds the **workload owner**](/azure/role-based-access-control/role-assignments-portal#add-access) with the [**contributor** role](/azure/role-based-access-control/built-in-roles#contributor) and sends notification to the **workload owner** that the resource group has been created.</span></span>
7. <span data-ttu-id="1490c-386">Crear un proceso de aprobación para que los propietarios de cargas de trabajo soliciten una conexión de emparejamiento de red virtual desde el propietario de la infraestructura compartida.</span><span class="sxs-lookup"><span data-stu-id="1490c-386">Create an approval process for workload owners to request a virtual network peering connection from the shared infrastructure owner.</span></span> <span data-ttu-id="1490c-387">Al igual que con el paso anterior, este proceso de aprobación se puede implementar mediante correo electrónico o con una herramienta de administración de procesos.</span><span class="sxs-lookup"><span data-stu-id="1490c-387">As with the previous step, this approval process can be implemented using email or a process management tool.</span></span>

<span data-ttu-id="1490c-388">Ahora que ha implementado el modelo de gobierno, puede implementar los servicios de infraestructura compartida.</span><span class="sxs-lookup"><span data-stu-id="1490c-388">Now that you've implemented your governance model, you can deploy your shared infrastructure services.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1490c-389">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="1490c-389">Next steps</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="1490c-390">Obtenga información sobre cómo implementar una infraestructura básica</span><span class="sxs-lookup"><span data-stu-id="1490c-390">Learn about deploying a basic infrastructure</span></span>](../infrastructure/basic-workload.md)

<!-- links -->
[understand-resource-access-in-azure]: /azure/role-based-access-control/rbac-and-directory-admin-roles

<!-- links -->

[rbac-built-in-owner]: /azure/role-based-access-control/built-in-roles#owner
[rbac-built-in-roles]: /azure/role-based-access-control/built-in-roles
