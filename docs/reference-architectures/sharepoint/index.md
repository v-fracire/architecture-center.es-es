---
title: Ejecución de una granja de servidores de SharePoint Server 2016 de alta disponibilidad en Azure
description: Procedimientos de demostrada eficacia para configurar una granja de servidores de SharePoint Server 2016 de alta disponibilidad en Azure.
author: njray
ms.date: 08/01/2017
ms.openlocfilehash: 9fe4fc09cf3babdf3ec8e8f27049f90e0047e9f0
ms.sourcegitcommit: 776b8c1efc662d42273a33de3b82ec69e3cd80c5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/12/2018
ms.locfileid: "38987716"
---
# <a name="run-a-high-availability-sharepoint-server-2016-farm-in-azure"></a><span data-ttu-id="ecd12-103">Ejecución de una granja de servidores de SharePoint Server 2016 de alta disponibilidad en Azure</span><span class="sxs-lookup"><span data-stu-id="ecd12-103">Run a high availability SharePoint Server 2016 farm in Azure</span></span>

<span data-ttu-id="ecd12-104">Esta arquitectura de referencia muestra un conjunto de procedimientos de demostrada eficacia para configurar una granja de servidores de SharePoint Server 2016 de alta disponibilidad en Azure, mediante la topología MinRole y los grupos de disponibilidad AlwaysOn de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ecd12-104">This reference architecture shows a set of proven practices for setting up a high availability SharePoint Server 2016 farm on Azure, using MinRole topology and SQL Server Always On availability groups.</span></span> <span data-ttu-id="ecd12-105">La granja de servidores de SharePoint se implementa en una red virtual protegida sin puntos de conexión accesibles desde Internet ni presencia en la susodicha red.</span><span class="sxs-lookup"><span data-stu-id="ecd12-105">The SharePoint farm is deployed in a secured virtual network with no Internet-facing endpoint or presence.</span></span> [<span data-ttu-id="ecd12-106">**Implementación de la solución**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-106">**Deploy this solution**.</span></span>](#deploy-the-solution) 

![](./images/sharepoint-ha.png)

<span data-ttu-id="ecd12-107">*Descargue un [archivo Visio][visio-download] de esta arquitectura.*</span><span class="sxs-lookup"><span data-stu-id="ecd12-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="ecd12-108">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="ecd12-108">Architecture</span></span>

<span data-ttu-id="ecd12-109">Esta arquitectura se basa en la que se muestra en [Run Windows VMs for an N-tier application][windows-n-tier] (Ejecución de máquinas virtuales Windows para una aplicación de n niveles).</span><span class="sxs-lookup"><span data-stu-id="ecd12-109">This architecture builds on the one shown in [Run Windows VMs for an N-tier application][windows-n-tier].</span></span> <span data-ttu-id="ecd12-110">Implementa una granja de servidores de SharePoint Server 2016 con alta disponibilidad dentro de una red virtual (VNet) de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-110">It deploys a SharePoint Server 2016 farm with high availability inside an Azure virtual network (VNet).</span></span> <span data-ttu-id="ecd12-111">Esta arquitectura es adecuada para un entorno de pruebas o producción, una infraestructura híbrida de SharePoint con Office 365 o como base para un escenario de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="ecd12-111">This architecture is suitable for a test or production environment, a SharePoint hybrid infrastructure with Office 365, or as the basis for a disaster recovery scenario.</span></span>

<span data-ttu-id="ecd12-112">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="ecd12-112">The architecture consists of the following components:</span></span>

- <span data-ttu-id="ecd12-113">**Grupos de recursos**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-113">**Resource groups**.</span></span> <span data-ttu-id="ecd12-114">Un [grupo de recursos][resource-group] es un contenedor que incluye recursos de Azure relacionados.</span><span class="sxs-lookup"><span data-stu-id="ecd12-114">A [resource group][resource-group] is a container that holds related Azure resources.</span></span> <span data-ttu-id="ecd12-115">Un grupo de recursos se usa para los servidores de SharePoint y otro grupo de recursos para los componentes de infraestructura que son independientes de las máquinas virtuales, como la red virtual y los equilibradores de carga.</span><span class="sxs-lookup"><span data-stu-id="ecd12-115">One resource group is used for the SharePoint servers, and another resource group is used for infrastructure components that are independent of VMs, such as the virtual network and load balancers.</span></span>

- <span data-ttu-id="ecd12-116">**Red virtual**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-116">**Virtual network (VNet)**.</span></span> <span data-ttu-id="ecd12-117">Las máquinas virtuales se implementan en una red virtual con un espacio de direcciones de intranet único.</span><span class="sxs-lookup"><span data-stu-id="ecd12-117">The VMs are deployed in a VNet with a unique intranet address space.</span></span> <span data-ttu-id="ecd12-118">La red virtual se subdivide además en subredes.</span><span class="sxs-lookup"><span data-stu-id="ecd12-118">The VNet is further subdivided into subnets.</span></span> 

- <span data-ttu-id="ecd12-119">**Máquinas virtuales (VM)**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-119">**Virtual machines (VMs)**.</span></span> <span data-ttu-id="ecd12-120">Las máquinas virtuales se implementan en la red virtual y se les asignan direcciones IP estáticas privadas a todas ellas.</span><span class="sxs-lookup"><span data-stu-id="ecd12-120">The VMs are deployed into the VNet, and private static IP addresses are assigned to all of the VMs.</span></span> <span data-ttu-id="ecd12-121">Se recomiendan las direcciones IP estáticas para las máquinas virtuales que ejecutan SQL Server y SharePoint Server 2016, a fin de evitar problemas con el almacenamiento en caché de direcciones IP y los cambios de direcciones después de un reinicio.</span><span class="sxs-lookup"><span data-stu-id="ecd12-121">Static IP addresses are recommended for the VMs running SQL Server and SharePoint Server 2016, to avoid issues with IP address caching and changes of addresses after a restart.</span></span>

- <span data-ttu-id="ecd12-122">**Conjuntos de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-122">**Availability sets**.</span></span> <span data-ttu-id="ecd12-123">Coloque las máquinas virtuales de cada rol de SharePoint en distintos [conjuntos de disponibilidad][availability-set] y aprovisione al menos dos máquinas virtuales (VM) para cada rol.</span><span class="sxs-lookup"><span data-stu-id="ecd12-123">Place the VMs for each SharePoint role into separate [availability sets][availability-set], and provision at least two virtual machines (VMs) for each role.</span></span> <span data-ttu-id="ecd12-124">Esto hace que las máquinas virtuales sean aptas para un Acuerdo de Nivel de Servicio (SLA) mayor.</span><span class="sxs-lookup"><span data-stu-id="ecd12-124">This makes the VMs eligible for a higher service level agreement (SLA).</span></span> 

- <span data-ttu-id="ecd12-125">**Equilibrador de carga interno**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-125">**Internal load balancer**.</span></span> <span data-ttu-id="ecd12-126">El [equilibrador de carga][load-balancer] distribuye el tráfico de solicitudes de SharePoint desde la red local hasta los servidores web front-end de la granja de servidores de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-126">The [load balancer][load-balancer] distributes SharePoint request traffic from the on-premises network to the front-end web servers of the SharePoint farm.</span></span> 

- <span data-ttu-id="ecd12-127">**Grupos de seguridad de red (NSG)**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-127">**Network security groups (NSGs)**.</span></span> <span data-ttu-id="ecd12-128">Para cada subred que contiene máquinas virtuales, se crea un [grupo de seguridad de red][nsg].</span><span class="sxs-lookup"><span data-stu-id="ecd12-128">For each subnet that contains virtual machines, a [network security group][nsg] is created.</span></span> <span data-ttu-id="ecd12-129">Use NSG para restringir el tráfico de red dentro de la red virtual, con el fin de aislar las subredes.</span><span class="sxs-lookup"><span data-stu-id="ecd12-129">Use NSGs to restrict network traffic within the VNet, in order to isolate subnets.</span></span> 

- <span data-ttu-id="ecd12-130">**Puerta de enlace**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-130">**Gateway**.</span></span> <span data-ttu-id="ecd12-131">La puerta de enlace proporciona una conexión entre la red local y la red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-131">The gateway provides a connection between your on-premises network and the Azure virtual network.</span></span> <span data-ttu-id="ecd12-132">La conexión puede usar ExpressRoute o VPN de sitio a sitio.</span><span class="sxs-lookup"><span data-stu-id="ecd12-132">Your connection can use ExpressRoute or site-to-site VPN.</span></span> <span data-ttu-id="ecd12-133">Para más información, consulte [Connect an on-premises network to Azure][hybrid-ra] (Conexión de una red local a Azure).</span><span class="sxs-lookup"><span data-stu-id="ecd12-133">For more information, see [Connect an on-premises network to Azure][hybrid-ra].</span></span>

- <span data-ttu-id="ecd12-134">**Controladores de dominio de Windows Server Active Directory (AD)**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-134">**Windows Server Active Directory (AD) domain controllers**.</span></span> <span data-ttu-id="ecd12-135">Esta arquitectura de referencia implementa controladores de dominio de Windows Server AD.</span><span class="sxs-lookup"><span data-stu-id="ecd12-135">This reference architecture deploys Windows Server AD domain controllers.</span></span> <span data-ttu-id="ecd12-136">Estos controladores de dominio se ejecutan en la red virtual de Azure y tienen una relación de confianza con el bosque de Windows Server AD local.</span><span class="sxs-lookup"><span data-stu-id="ecd12-136">These domain controllers run in the Azure VNet and have a trust relationship with the on-premises Windows Server AD forest.</span></span> <span data-ttu-id="ecd12-137">Las solicitudes web de cliente de los recursos de la granja de servidores de SharePoint se autentican en la red virtual en lugar de enviarse ese tráfico de autenticación a la red local a través de la conexión de puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="ecd12-137">Client web requests for SharePoint farm resources are authenticated in the VNet rather than sending that authentication traffic across the gateway connection to the on-premises network.</span></span> <span data-ttu-id="ecd12-138">En DNS, se crean registros A o CNAME de intranet para que los usuarios de intranet puedan resolver el nombre de la granja de servidores de SharePoint en la dirección IP privada del equilibrador de carga interno.</span><span class="sxs-lookup"><span data-stu-id="ecd12-138">In DNS, intranet A or CNAME records are created so that intranet users can resolve the name of the SharePoint farm to the private IP address of the internal load balancer.</span></span>

  <span data-ttu-id="ecd12-139">SharePoint Server 2016 también admite el uso de [Azure Active Directory Domain Services](/azure/active-directory-domain-services/).</span><span class="sxs-lookup"><span data-stu-id="ecd12-139">SharePoint Server 2016 also supports using [Azure Active Directory Domain Services](/azure/active-directory-domain-services/).</span></span> <span data-ttu-id="ecd12-140">Azure AD Domain Services proporciona servicios de dominio administrado, por lo que no necesitará implementar y administrar controladores de dominio en Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-140">Azure AD Domain Services provides managed domain services, so that you don't need to deploy and manage domain controllers in Azure.</span></span>

- <span data-ttu-id="ecd12-141">**Grupo de disponibilidad AlwaysOn de SQL Server**</span><span class="sxs-lookup"><span data-stu-id="ecd12-141">**SQL Server Always On Availability Group**.</span></span> <span data-ttu-id="ecd12-142">Para lograr una alta disponibilidad de la base de datos de SQL Server, se recomiendan los [grupos de disponibilidad AlwaysOn de SQL Server][sql-always-on].</span><span class="sxs-lookup"><span data-stu-id="ecd12-142">For high availability of the SQL Server database, we recommend [SQL Server Always On Availability Groups][sql-always-on].</span></span> <span data-ttu-id="ecd12-143">Se usan dos máquinas virtuales para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ecd12-143">Two virtual machines are used for SQL Server.</span></span> <span data-ttu-id="ecd12-144">Una contiene la réplica de base de datos principal y la otra la réplica secundaria.</span><span class="sxs-lookup"><span data-stu-id="ecd12-144">One contains the primary database replica and the other contains the secondary replica.</span></span> 

- <span data-ttu-id="ecd12-145">**Máquina virtual de mayoría de nodos**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-145">**Majority node VM**.</span></span> <span data-ttu-id="ecd12-146">Esta máquina virtual permite que el clúster de conmutación por error establezca el cuórum.</span><span class="sxs-lookup"><span data-stu-id="ecd12-146">This VM allows the failover cluster to establish quorum.</span></span> <span data-ttu-id="ecd12-147">Para más información, consulte [Descripción de las configuraciones de cuórum en un clúster de conmutación por error][sql-quorum].</span><span class="sxs-lookup"><span data-stu-id="ecd12-147">For more information, see [Understanding Quorum Configurations in a Failover Cluster][sql-quorum].</span></span>

- <span data-ttu-id="ecd12-148">**Servidores de SharePoint**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-148">**SharePoint servers**.</span></span> <span data-ttu-id="ecd12-149">Los servidores de SharePoint desempeñan funciones de front-end web, almacenamiento en caché, aplicación y búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ecd12-149">The SharePoint servers perform the web front-end, caching, application, and search roles.</span></span> 

- <span data-ttu-id="ecd12-150">**JumpBox**.</span><span class="sxs-lookup"><span data-stu-id="ecd12-150">**Jumpbox**.</span></span> <span data-ttu-id="ecd12-151">También se le conoce como [bastion host][bastion-host].</span><span class="sxs-lookup"><span data-stu-id="ecd12-151">Also called a [bastion host][bastion-host].</span></span> <span data-ttu-id="ecd12-152">Se trata de una máquina virtual segura en la red que usan los administradores para conectarse al resto de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="ecd12-152">This is a secure VM on the network that administrators use to connect to the other VMs.</span></span> <span data-ttu-id="ecd12-153">El JumpBox tiene un NSG que solo permite el tráfico remoto que procede de direcciones IP públicas de una lista segura.</span><span class="sxs-lookup"><span data-stu-id="ecd12-153">The jumpbox has an NSG that allows remote traffic only from public IP addresses on a safe list.</span></span> <span data-ttu-id="ecd12-154">El NSG debe permitir el tráfico de escritorio remoto (RDP).</span><span class="sxs-lookup"><span data-stu-id="ecd12-154">The NSG should permit remote desktop (RDP) traffic.</span></span>

## <a name="recommendations"></a><span data-ttu-id="ecd12-155">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="ecd12-155">Recommendations</span></span>

<span data-ttu-id="ecd12-156">Los requisitos pueden diferir de los de la arquitectura que se describe aquí.</span><span class="sxs-lookup"><span data-stu-id="ecd12-156">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="ecd12-157">Use estas recomendaciones como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="ecd12-157">Use these recommendations as a starting point.</span></span>

### <a name="resource-group-recommendations"></a><span data-ttu-id="ecd12-158">Recomendaciones para grupos de recursos</span><span class="sxs-lookup"><span data-stu-id="ecd12-158">Resource group recommendations</span></span>

<span data-ttu-id="ecd12-159">Se recomienda separar los grupos de recursos de acuerdo con el rol del servidor y tener un grupo de recursos independiente para los componentes de infraestructura que sean recursos globales.</span><span class="sxs-lookup"><span data-stu-id="ecd12-159">We recommend separating resource groups according to the server role, and having a separate resource group for infrastructure components that are global resources.</span></span> <span data-ttu-id="ecd12-160">En esta arquitectura, los recursos de SharePoint forman un grupo, mientras que SQL Server y otros recursos de utilidad forman otro.</span><span class="sxs-lookup"><span data-stu-id="ecd12-160">In this architecture, the SharePoint resources form one group, while the SQL Server and other utility assets form another.</span></span>

### <a name="virtual-network-and-subnet-recommendations"></a><span data-ttu-id="ecd12-161">Recomendaciones para red virtual y subred</span><span class="sxs-lookup"><span data-stu-id="ecd12-161">Virtual network and subnet recommendations</span></span>

<span data-ttu-id="ecd12-162">Use una subred para cada rol de SharePoint, más una subred para la puerta de enlace y otra para el JumpBox.</span><span class="sxs-lookup"><span data-stu-id="ecd12-162">Use one subnet for each SharePoint role, plus a subnet for the gateway and one for the jumpbox.</span></span> 

<span data-ttu-id="ecd12-163">La subred de puerta de enlace debe tener el nombre *GatewaySubnet*.</span><span class="sxs-lookup"><span data-stu-id="ecd12-163">The gateway subnet must be named *GatewaySubnet*.</span></span> <span data-ttu-id="ecd12-164">Asigne el espacio de direcciones de subred de puerta de enlace desde la última parte del espacio de direcciones de red virtual.</span><span class="sxs-lookup"><span data-stu-id="ecd12-164">Assign the gateway subnet address space from the last part of the virtual network address space.</span></span> <span data-ttu-id="ecd12-165">Para más información, consulte la sección [Connect an on-premises network to Azure using a VPN gateway][hybrid-vpn-ra] (Conexión de una red local a Azure mediante una puerta de enlace de VPN).</span><span class="sxs-lookup"><span data-stu-id="ecd12-165">For more information, see [Connect an on-premises network to Azure using a VPN gateway][hybrid-vpn-ra].</span></span>

### <a name="vm-recommendations"></a><span data-ttu-id="ecd12-166">Recomendaciones de VM</span><span class="sxs-lookup"><span data-stu-id="ecd12-166">VM recommendations</span></span>

<span data-ttu-id="ecd12-167">En función de los tamaños de máquina virtual DSv2 estándar, esta arquitectura requiere como mínimo 38 núcleos:</span><span class="sxs-lookup"><span data-stu-id="ecd12-167">Based on Standard DSv2 virtual machine sizes, this architecture requires a minimum of 38 cores:</span></span>

- <span data-ttu-id="ecd12-168">8 servidores de SharePoint en Standard_DS3_v2 (4 núcleos cada uno) = 32 núcleos</span><span class="sxs-lookup"><span data-stu-id="ecd12-168">8 SharePoint servers on Standard_DS3_v2 (4 cores each) = 32 cores</span></span>
- <span data-ttu-id="ecd12-169">2 controladores de dominio de Active Directory en Standard_DS1_v2 (1 núcleo cada uno) = 2 núcleos</span><span class="sxs-lookup"><span data-stu-id="ecd12-169">2 Active Directory domain controllers on Standard_DS1_v2 (1 core each) = 2 cores</span></span>
- <span data-ttu-id="ecd12-170">2 máquinas virtuales de SQL Server en Standard_DS1_v2 = 2 núcleos</span><span class="sxs-lookup"><span data-stu-id="ecd12-170">2 SQL Server VMs on Standard_DS1_v2 = 2 cores</span></span>
- <span data-ttu-id="ecd12-171">1 mayoría de nodos en Standard_DS1_v2 = 1 núcleo</span><span class="sxs-lookup"><span data-stu-id="ecd12-171">1 majority node on Standard_DS1_v2 = 1 core</span></span>
- <span data-ttu-id="ecd12-172">1 servidor de administración en Standard_DS1_v2 = 1 núcleo</span><span class="sxs-lookup"><span data-stu-id="ecd12-172">1 management server on Standard_DS1_v2 = 1 core</span></span>

<span data-ttu-id="ecd12-173">El número total de núcleos dependerá de los tamaños de máquina virtual que seleccione.</span><span class="sxs-lookup"><span data-stu-id="ecd12-173">The total number of cores will depend on the VM sizes that you select.</span></span> <span data-ttu-id="ecd12-174">Para más información, consulte [Recomendaciones para el servidor de SharePoint](#sharepoint-server-recommendations) a continuación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-174">For more information, see [SharePoint Server recommendations](#sharepoint-server-recommendations) below.</span></span>

<span data-ttu-id="ecd12-175">Asegúrese de que su suscripción de Azure tenga suficiente cuota de núcleos de máquina virtual para la implementación, o esta no se realizará correctamente.</span><span class="sxs-lookup"><span data-stu-id="ecd12-175">Make sure your Azure subscription has enough VM core quota for the deployment, or the deployment will fail.</span></span> <span data-ttu-id="ecd12-176">Consulte [Límites, cuotas y restricciones de suscripción y servicios de Azure][quotas].</span><span class="sxs-lookup"><span data-stu-id="ecd12-176">See [Azure subscription and service limits, quotas, and constraints][quotas].</span></span> 
 
### <a name="nsg-recommendations"></a><span data-ttu-id="ecd12-177">Recomendaciones para NSG</span><span class="sxs-lookup"><span data-stu-id="ecd12-177">NSG recommendations</span></span>

<span data-ttu-id="ecd12-178">Se recomienda tener un NSG para cada subred que contenga máquinas virtuales, para permitir el aislamiento de la subred.</span><span class="sxs-lookup"><span data-stu-id="ecd12-178">We recommend having one NSG for each subnet that contains VMs, to enable subnet isolation.</span></span> <span data-ttu-id="ecd12-179">Si quiere configurar el aislamiento de la subred, agregue reglas NSG que definan el tráfico entrante o saliente permitido o denegado para cada subred.</span><span class="sxs-lookup"><span data-stu-id="ecd12-179">If you want to configure subnet isolation, add NSG rules that define the allowed or denied inbound or outbound traffic for each subnet.</span></span> <span data-ttu-id="ecd12-180">Para más información, consulte [Filtrado del tráfico de red con grupos de seguridad de red][virtual-networks-nsg].</span><span class="sxs-lookup"><span data-stu-id="ecd12-180">For more information, see [Filter network traffic with network security groups][virtual-networks-nsg].</span></span> 

<span data-ttu-id="ecd12-181">No asigne un NSG a la subred de puerta de enlace o la puerta de enlace dejará de funcionar.</span><span class="sxs-lookup"><span data-stu-id="ecd12-181">Do not assign an NSG to the gateway subnet, or the gateway will stop functioning.</span></span> 

### <a name="storage-recommendations"></a><span data-ttu-id="ecd12-182">Recomendaciones para almacenamiento</span><span class="sxs-lookup"><span data-stu-id="ecd12-182">Storage recommendations</span></span>

<span data-ttu-id="ecd12-183">La configuración del almacenamiento de las máquinas virtuales de la granja de servidores debe coincidir con los procedimientos recomendados usados en las implementaciones locales.</span><span class="sxs-lookup"><span data-stu-id="ecd12-183">The storage configuration of the VMs in the farm should match the appropriate best practices used for on-premises deployments.</span></span> <span data-ttu-id="ecd12-184">Los servidores de SharePoint deben tener un disco aparte para los registros.</span><span class="sxs-lookup"><span data-stu-id="ecd12-184">SharePoint servers should have a separate disk for logs.</span></span> <span data-ttu-id="ecd12-185">Los servidores de SharePoint que hospedan roles de índice de búsqueda requieren espacio en disco adicional para que se almacene el índice de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ecd12-185">SharePoint servers hosting search index roles require additional disk space for the search index to be stored.</span></span> <span data-ttu-id="ecd12-186">En SQL Server, el procedimiento habitual consiste en separar datos y registros.</span><span class="sxs-lookup"><span data-stu-id="ecd12-186">For SQL Server, the standard practice is to separate data and logs.</span></span> <span data-ttu-id="ecd12-187">Agregue más discos para el almacenamiento de copia de seguridad de base de datos y use un disco independiente para [tempdb][tempdb].</span><span class="sxs-lookup"><span data-stu-id="ecd12-187">Add more disks for database backup storage, and use a separate disk for [tempdb][tempdb].</span></span>

<span data-ttu-id="ecd12-188">Para lograr la máxima confiabilidad, se recomienda usar [Azure Managed Disks][managed-disks].</span><span class="sxs-lookup"><span data-stu-id="ecd12-188">For best reliability, we recommend using [Azure Managed Disks][managed-disks].</span></span> <span data-ttu-id="ecd12-189">Los discos administrados garantizan que los discos de las máquinas virtuales de un conjunto de disponibilidad estén aislados, con el fin de evitar únicos puntos de error.</span><span class="sxs-lookup"><span data-stu-id="ecd12-189">Managed disks ensure that the disks for VMs within an availability set are isolated to avoid single points of failure.</span></span> 

> [!NOTE]
> <span data-ttu-id="ecd12-190">Actualmente la plantilla de Resource Manager para esta arquitectura de referencia no usa discos administrados,</span><span class="sxs-lookup"><span data-stu-id="ecd12-190">Currently the Resource Manager template for this reference architecture does not use managed disks.</span></span> <span data-ttu-id="ecd12-191">pero está previsto actualizarla para que los use.</span><span class="sxs-lookup"><span data-stu-id="ecd12-191">We are planning to update the template to use managed disks.</span></span>

<span data-ttu-id="ecd12-192">Use discos administrados Premium en todas las máquinas virtuales de SQL Server y SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-192">Use Premium managed disks for all SharePoint and SQL Server VMs.</span></span> <span data-ttu-id="ecd12-193">Puede usar discos administrados Estándar para el servidor de mayoría de nodos, los controladores de dominio y el servidor de administración.</span><span class="sxs-lookup"><span data-stu-id="ecd12-193">You can use Standard managed disks for the majority node server, the domain controllers, and the management server.</span></span> 

### <a name="sharepoint-server-recommendations"></a><span data-ttu-id="ecd12-194">Recomendaciones para el servidor de SharePoint</span><span class="sxs-lookup"><span data-stu-id="ecd12-194">SharePoint Server recommendations</span></span>

<span data-ttu-id="ecd12-195">Antes de configurar la granja de servidores de SharePoint, asegúrese de que tiene una cuenta de servicio de Windows Server Active Directory por cada servicio.</span><span class="sxs-lookup"><span data-stu-id="ecd12-195">Before configuring the SharePoint farm, make sure you have one Windows Server Active Directory service account per service.</span></span> <span data-ttu-id="ecd12-196">Para esta arquitectura, se necesita como mínimo las siguientes cuentas de nivel de dominio para aislar los privilegios por rol:</span><span class="sxs-lookup"><span data-stu-id="ecd12-196">For this architecture, you need at a minimum the following domain-level accounts to isolate privilege per role:</span></span>

- <span data-ttu-id="ecd12-197">Cuenta de servicio de SQL Server</span><span class="sxs-lookup"><span data-stu-id="ecd12-197">SQL Server Service account</span></span>
- <span data-ttu-id="ecd12-198">Cuenta de usuario de instalación</span><span class="sxs-lookup"><span data-stu-id="ecd12-198">Setup User account</span></span>
- <span data-ttu-id="ecd12-199">Cuenta de granja de servidores</span><span class="sxs-lookup"><span data-stu-id="ecd12-199">Server Farm account</span></span>
- <span data-ttu-id="ecd12-200">Cuenta de Search Service</span><span class="sxs-lookup"><span data-stu-id="ecd12-200">Search Service account</span></span>
- <span data-ttu-id="ecd12-201">Cuenta de acceso al contenido</span><span class="sxs-lookup"><span data-stu-id="ecd12-201">Content Access account</span></span>
- <span data-ttu-id="ecd12-202">Cuentas de grupo de aplicaciones web</span><span class="sxs-lookup"><span data-stu-id="ecd12-202">Web App Pool accounts</span></span>
- <span data-ttu-id="ecd12-203">Cuentas de grupo de aplicaciones de servicio</span><span class="sxs-lookup"><span data-stu-id="ecd12-203">Service App Pool accounts</span></span>
- <span data-ttu-id="ecd12-204">Cuenta de superusuario de caché</span><span class="sxs-lookup"><span data-stu-id="ecd12-204">Cache Super User account</span></span>
- <span data-ttu-id="ecd12-205">Cuenta de lector avanzado de caché</span><span class="sxs-lookup"><span data-stu-id="ecd12-205">Cache Super Reader account</span></span>

<span data-ttu-id="ecd12-206">Para todos los roles, excepto indexador de búsqueda, se recomienda usar el tamaño de máquina virtual [Standard_DS3_v2][vm-sizes-general].</span><span class="sxs-lookup"><span data-stu-id="ecd12-206">For all roles except the Search Indexer, we recommended using the [Standard_DS3_v2][vm-sizes-general] VM size.</span></span> <span data-ttu-id="ecd12-207">El indexador de búsqueda debe tener como mínimo el tamaño [Standard_DS13_v2][vm-sizes-memory].</span><span class="sxs-lookup"><span data-stu-id="ecd12-207">The Search Indexer should be at least the [Standard_DS13_v2][vm-sizes-memory] size.</span></span> 

> [!NOTE]
> <span data-ttu-id="ecd12-208">La plantilla de Resource Manager de esta arquitectura de referencia usa el tamaño DS3 más pequeño para el indexador de búsqueda, con el fin de probar la implementación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-208">The Resource Manager template for this reference architecture uses the smaller DS3 size for the Search Indexer, for purposes of testing the deployment.</span></span> <span data-ttu-id="ecd12-209">Si la implementación es para producción, use el tamaño DS13 o mayor.</span><span class="sxs-lookup"><span data-stu-id="ecd12-209">For a production deployment, use the DS13 size or larger.</span></span> 

<span data-ttu-id="ecd12-210">Si las cargas de trabajo son de producción, consulte [Requisitos de hardware y software para SharePoint Server 2016][sharepoint-reqs].</span><span class="sxs-lookup"><span data-stu-id="ecd12-210">For production workloads, see [Hardware and software requirements for SharePoint Server 2016][sharepoint-reqs].</span></span> 

<span data-ttu-id="ecd12-211">Para satisfacer el requisito de compatibilidad con el rendimiento del disco de 200 MB por segundo como mínimo, asegúrese de planear la arquitectura de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ecd12-211">To meet the support requirement for disk throughput of 200 MB per second minimum, make sure to plan the Search architecture.</span></span> <span data-ttu-id="ecd12-212">Consulte [Planear la arquitectura de búsqueda empresarial en SharePoint Server 2013][sharepoint-search].</span><span class="sxs-lookup"><span data-stu-id="ecd12-212">See [Plan enterprise search architecture in SharePoint Server 2013][sharepoint-search].</span></span> <span data-ttu-id="ecd12-213">Además, siga las directrices descritas en [Best practices for crawling in SharePoint Server 2016][sharepoint-crawling] (Procedimientos recomendados para rastreo en SharePoint Server 2016).</span><span class="sxs-lookup"><span data-stu-id="ecd12-213">Also follow the guidelines in [Best practices for crawling in SharePoint Server 2016][sharepoint-crawling].</span></span>

<span data-ttu-id="ecd12-214">Asimismo, almacene los datos del componente de búsqueda en un volumen de almacenamiento independiente o en una partición con alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="ecd12-214">In addition, store the search component data on a separate storage volume or partition with high performance.</span></span> <span data-ttu-id="ecd12-215">Para reducir la carga y mejorar el rendimiento, configure las cuentas de usuario de caché de objeto, que son necesarias en esta arquitectura.</span><span class="sxs-lookup"><span data-stu-id="ecd12-215">To reduce load and improve throughput, configure the object cache user accounts, which are required in this architecture.</span></span> <span data-ttu-id="ecd12-216">Divida los archivos del sistema operativo Windows Server, los archivos de programa de SharePoint Server 2016 y los registros de diagnóstico en tres volúmenes de almacenamiento independientes o particiones con un rendimiento normal.</span><span class="sxs-lookup"><span data-stu-id="ecd12-216">Split the Windows Server operating system files, the SharePoint Server 2016 program files, and diagnostics logs across three separate storage volumes or partitions with normal performance.</span></span> 

<span data-ttu-id="ecd12-217">Para más información sobre estas recomendaciones, consulte [Cuentas de servicio y administrativas de implementación inicial en SharePoint Server 2016][sharepoint-accounts].</span><span class="sxs-lookup"><span data-stu-id="ecd12-217">For more information about these recommendations, see [Initial deployment administrative and service accounts in SharePoint Server 2016][sharepoint-accounts].</span></span>

### <a name="hybrid-workloads"></a><span data-ttu-id="ecd12-218">Cargas de trabajo híbridas</span><span class="sxs-lookup"><span data-stu-id="ecd12-218">Hybrid workloads</span></span>

<span data-ttu-id="ecd12-219">Esta arquitectura de referencia implementa una granja de servidores de SharePoint Server 2016 que se puede usar como un [entorno de SharePoint híbrido][ sharepoint-hybrid] &mdash; es decir, que extiende SharePoint Server 2016 a Office 365 SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="ecd12-219">This reference architecture deploys a SharePoint Server 2016 farm that can be used as a [SharePoint hybrid environment][sharepoint-hybrid] &mdash; that is, extending SharePoint Server 2016 to Office 365 SharePoint Online.</span></span> <span data-ttu-id="ecd12-220">Si tiene Office Online Server, consulte [Compatibilidad de Office Web Apps y Office Online Server en Azure][office-web-apps].</span><span class="sxs-lookup"><span data-stu-id="ecd12-220">If you have Office Online Server, see [Office Web Apps and Office Online Server supportability in Azure][office-web-apps].</span></span>

<span data-ttu-id="ecd12-221">Las aplicaciones de servicio predeterminadas de esta implementación están diseñadas para admitir cargas de trabajo híbridas.</span><span class="sxs-lookup"><span data-stu-id="ecd12-221">The default service applications in this deployment are designed to support hybrid workloads.</span></span> <span data-ttu-id="ecd12-222">Todas las cargas de trabajo híbridas de SharePoint Server 2016 y Office 365 se pueden implementar en esta granja de servidores sin cambios en la infraestructura de SharePoint, con una excepción: la aplicación híbrida de nube de Search Service no se debe implementar en servidores que hospeden una topología de búsqueda existente.</span><span class="sxs-lookup"><span data-stu-id="ecd12-222">All SharePoint Server 2016 and Office 365 hybrid workloads can be deployed to this farm without changes to the SharePoint infrastructure, with one exception: The Cloud Hybrid Search Service Application must not be deployed onto servers hosting an existing search topology.</span></span> <span data-ttu-id="ecd12-223">Por lo tanto, es necesario agregar a la granja una o varias máquinas virtuales basadas en roles de búsqueda para admitir este escenario híbrido.</span><span class="sxs-lookup"><span data-stu-id="ecd12-223">Therefore, one or more search-role-based VMs must be added to the farm to support this hybrid scenario.</span></span>

### <a name="sql-server-always-on-availability-groups"></a><span data-ttu-id="ecd12-224">Grupos de disponibilidad AlwaysOn de SQL Server</span><span class="sxs-lookup"><span data-stu-id="ecd12-224">SQL Server Always On Availability Groups</span></span>

<span data-ttu-id="ecd12-225">En esta arquitectura se usan máquinas virtuales de SQL Server porque SharePoint Server 2016 no puede usar Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="ecd12-225">This architecture uses SQL Server virtual machines because SharePoint Server 2016 cannot use Azure SQL Database.</span></span> <span data-ttu-id="ecd12-226">Para lograr alta disponibilidad en SQL Server, se recomienda usar grupos de disponibilidad AlwaysOn, que especifican un conjunto de bases de datos que conmutan por error juntas, lo que hace que tengan una alta capacidad de disponibilidad y recuperación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-226">To support high availability in SQL Server, we recommend using Always On Availability Groups, which specify a set of databases that fail over together, making them highly-available and recoverable.</span></span> <span data-ttu-id="ecd12-227">En esta arquitectura de referencia, las bases de datos se crean durante la implementación, pero es necesario habilitar manualmente los grupos de disponibilidad AlwaysOn y agregar las bases de datos de SharePoint a uno de estos grupos.</span><span class="sxs-lookup"><span data-stu-id="ecd12-227">In this reference architecture, the databases are created during deployment, but you must manually enable Always On Availability Groups and add the SharePoint databases to an availability group.</span></span> <span data-ttu-id="ecd12-228">Para más información, consulte [Crear el grupo de disponibilidad y agregar las bases de datos de SharePoint][create-availability-group].</span><span class="sxs-lookup"><span data-stu-id="ecd12-228">For more information, see [Create the availability group and add the SharePoint databases][create-availability-group].</span></span>

<span data-ttu-id="ecd12-229">También se recomienda agregar una dirección IP de escucha al clúster, que es la dirección IP privada del equilibrador de carga interno para las máquinas virtuales de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ecd12-229">We also recommend adding a listener IP address to the cluster, which is the private IP address of the internal load balancer for the SQL Server virtual machines.</span></span>

<span data-ttu-id="ecd12-230">Para conocer los tamaños de máquina virtual recomendados y otras recomendaciones sobre rendimiento para SQL Server en Azure, consulte [Procedimientos recomendados para SQL Server en Azure Virtual Machines][sql-performance].</span><span class="sxs-lookup"><span data-stu-id="ecd12-230">For recommended VM sizes and other performance recommendations for SQL Server running in Azure, see [Performance best practices for SQL Server in Azure Virtual Machines][sql-performance].</span></span> <span data-ttu-id="ecd12-231">Además, siga las recomendaciones de [Procedimientos recomendados para SQL Server en una granja de servidores de SharePoint 2016][sql-sharepoint-best-practices].</span><span class="sxs-lookup"><span data-stu-id="ecd12-231">Also follow the recommendations in [Best practices for SQL Server in a SharePoint Server 2016 farm][sql-sharepoint-best-practices].</span></span>

<span data-ttu-id="ecd12-232">Se recomienda que el servidor de mayoría de nodos resida en un equipo independiente de los asociados de replicación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-232">We recommend that the majority node server reside on a separate computer from the replication partners.</span></span> <span data-ttu-id="ecd12-233">El servidor permite que el servidor asociado de replicación secundaria en una sesión en modo de alta seguridad reconozca si debe iniciar una conmutación por error automática.</span><span class="sxs-lookup"><span data-stu-id="ecd12-233">The server enables the secondary replication partner server in a high-safety mode session to recognize whether to initiate an automatic failover.</span></span> <span data-ttu-id="ecd12-234">A diferencia de los dos asociados, los servidores de mayoría de nodos no atienden la base de datos, sino que admiten la conmutación por error automática.</span><span class="sxs-lookup"><span data-stu-id="ecd12-234">Unlike the two partners, the majority node server doesn't serve the database but rather supports automatic failover.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="ecd12-235">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="ecd12-235">Scalability considerations</span></span>

<span data-ttu-id="ecd12-236">Para escalar verticalmente los servidores existentes, simplemente cambie el tamaño de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="ecd12-236">To scale up the existing servers, simply change the VM size.</span></span> 

<span data-ttu-id="ecd12-237">Con la funcionalidad [MinRoles][minroles] de SharePoint Server 2016, puede escalar horizontalmente los servidores según el rol del servidor y también quitar servidores de un rol.</span><span class="sxs-lookup"><span data-stu-id="ecd12-237">With the [MinRoles][minroles] capability in SharePoint Server 2016, you can scale out servers based on the server's role and also remove servers from a role.</span></span> <span data-ttu-id="ecd12-238">Cuando agregue servidores a un rol, puede especificar cualquiera de los roles únicos o uno de los roles combinados.</span><span class="sxs-lookup"><span data-stu-id="ecd12-238">When you add servers to a role, you can specify any of the single roles or one of the combined roles.</span></span> <span data-ttu-id="ecd12-239">Sin embargo, si agrega servidores al rol de búsqueda, también debe reconfigurar la topología de búsqueda mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ecd12-239">If you add servers to the Search role, however, you must also reconfigure the search topology using PowerShell.</span></span> <span data-ttu-id="ecd12-240">Además, puede convertir roles mediante MinRoles.</span><span class="sxs-lookup"><span data-stu-id="ecd12-240">You can also convert roles using MinRoles.</span></span> <span data-ttu-id="ecd12-241">Para más información, consulte [Administración de una granja de servidores de MinRole en SharePoint Server 2016][sharepoint-minrole].</span><span class="sxs-lookup"><span data-stu-id="ecd12-241">For more information, see [Managing a MinRole Server Farm in SharePoint Server 2016][sharepoint-minrole].</span></span>

<span data-ttu-id="ecd12-242">Tenga en cuenta que SharePoint Server 2016 no admite el uso de conjuntos de escalado de máquinas virtuales para el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="ecd12-242">Note that SharePoint Server 2016 doesn't support using virtual machine scale sets for auto-scaling.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="ecd12-243">Consideraciones sobre disponibilidad</span><span class="sxs-lookup"><span data-stu-id="ecd12-243">Availability considerations</span></span>

<span data-ttu-id="ecd12-244">Esta arquitectura de referencia admite alta disponibilidad dentro de una región de Azure, porque cada rol tiene al menos dos máquinas virtuales implementadas en un conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="ecd12-244">This reference architecture supports high availability within an Azure region, because each role has at least two VMs deployed in an availability set.</span></span>

<span data-ttu-id="ecd12-245">Para protegerse frente a un error regional, cree una granja de servidores de recuperación ante desastres independiente en una región distinta de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-245">To protect against a regional failure, create a separate disaster recovery farm in a different Azure region.</span></span> <span data-ttu-id="ecd12-246">Los objetivos de tiempo de recuperación (RTO) y los objetivos de punto de recuperación (RPO) determinarán los requisitos de instalación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-246">Your recovery time objectives (RTOs) and recovery point objectives (RPOs) will determine the setup requirements.</span></span> <span data-ttu-id="ecd12-247">Para más información, consulte [Seleccionar una estrategia de recuperación ante desastres para SharePoint 2016][sharepoint-dr].</span><span class="sxs-lookup"><span data-stu-id="ecd12-247">For details, see [Choose a disaster recovery strategy for SharePoint 2016][sharepoint-dr].</span></span> <span data-ttu-id="ecd12-248">La región secundaria debe ser una *región emparejada* con la región primaria.</span><span class="sxs-lookup"><span data-stu-id="ecd12-248">The secondary region should be a *paired region* with the primary region.</span></span> <span data-ttu-id="ecd12-249">En el caso de una interrupción amplia, tiene prioridad la recuperación de una región de cada pareja.</span><span class="sxs-lookup"><span data-stu-id="ecd12-249">In the event of a broad outage, recovery of one region is prioritized out of every pair.</span></span> <span data-ttu-id="ecd12-250">Para más información, consulte [Continuidad empresarial y recuperación ante desastres (BCDR): regiones emparejadas de Azure][paired-regions].</span><span class="sxs-lookup"><span data-stu-id="ecd12-250">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions][paired-regions].</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="ecd12-251">Consideraciones sobre la manejabilidad</span><span class="sxs-lookup"><span data-stu-id="ecd12-251">Manageability considerations</span></span>

<span data-ttu-id="ecd12-252">Para operar y mantener servidores, granjas de servidores y sitios, siga los procedimientos recomendados para las operaciones de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-252">To operate and maintain servers, server farms, and sites, follow the recommended practices for SharePoint operations.</span></span> <span data-ttu-id="ecd12-253">Para más información, consulte [Operaciones para SharePoint Server 2016][sharepoint-ops].</span><span class="sxs-lookup"><span data-stu-id="ecd12-253">For more information, see [Operations for SharePoint Server 2016][sharepoint-ops].</span></span>

<span data-ttu-id="ecd12-254">Las tareas que debe tener en cuenta al administrar SQL Server en un entorno de SharePoint pueden diferir de aquellas que se suelen considerar para una aplicación de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ecd12-254">The tasks to consider when managing SQL Server in a SharePoint environment may differ from the ones typically considered for a database application.</span></span> <span data-ttu-id="ecd12-255">Un procedimiento recomendado es realizar una copia de seguridad semanal completa de todas las bases de datos SQL con copias de seguridad incrementales durante la noche.</span><span class="sxs-lookup"><span data-stu-id="ecd12-255">A best practice is to fully back up all SQL databases weekly with incremental nightly backups.</span></span> <span data-ttu-id="ecd12-256">Realice copia de seguridad de los registros de transacciones cada 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="ecd12-256">Back up transaction logs every 15 minutes.</span></span> <span data-ttu-id="ecd12-257">Otro procedimiento consiste en implementar tareas de mantenimiento de SQL Server en las bases de datos y deshabilitar las integradas de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-257">Another practice is to implement SQL Server maintenance tasks on the databases while disabling the built-in SharePoint ones.</span></span> <span data-ttu-id="ecd12-258">Para más información, consulte [Almacenamiento y configuración y planeamiento de capacidad de SQL Server][sql-server-capacity-planning].</span><span class="sxs-lookup"><span data-stu-id="ecd12-258">For more information, see [Storage and SQL Server capacity planning and configuration][sql-server-capacity-planning].</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="ecd12-259">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="ecd12-259">Security considerations</span></span>

<span data-ttu-id="ecd12-260">Las cuentas de servicio de nivel de dominio usadas para ejecutar SharePoint Server 2016 requieren controladores de dominio de Windows Server AD para los procesos de autenticación y unión a dominios.</span><span class="sxs-lookup"><span data-stu-id="ecd12-260">The domain-level service accounts used to run SharePoint Server 2016 require Windows Server AD domain controllers for domain-join and authentication processes.</span></span> <span data-ttu-id="ecd12-261">Azure Active Directory Domain Services no se puede usar con esta finalidad.</span><span class="sxs-lookup"><span data-stu-id="ecd12-261">Azure Active Directory Domain Services can't be used for this purpose.</span></span> <span data-ttu-id="ecd12-262">Para ampliar la infraestructura de identidad de Windows Server AD ya implantada en la intranet, esta arquitectura emplea dos controladores de dominio de réplica de Windows Server AD de un bosque existente de Windows Server AD local.</span><span class="sxs-lookup"><span data-stu-id="ecd12-262">To extend the Windows Server AD identity infrastructure already in place in the intranet, this architecture uses two Windows Server AD replica domain controllers of an existing on-premises Windows Server AD forest.</span></span>

<span data-ttu-id="ecd12-263">Además, siempre es conveniente planear la protección de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ecd12-263">In addition, it's always wise to plan for security hardening.</span></span> <span data-ttu-id="ecd12-264">Otras recomendaciones son:</span><span class="sxs-lookup"><span data-stu-id="ecd12-264">Other recommendations include:</span></span>

- <span data-ttu-id="ecd12-265">Agregar reglas a los NSG para aislar las subredes y los roles.</span><span class="sxs-lookup"><span data-stu-id="ecd12-265">Add rules to NSGs to isolate subnets and roles.</span></span>
- <span data-ttu-id="ecd12-266">No asignar direcciones IP públicas a las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="ecd12-266">Don't assign public IP addresses to VMs.</span></span>
- <span data-ttu-id="ecd12-267">Para la detección de intrusiones y el análisis de cargas útiles, considere la posibilidad de usar una aplicación virtual de red delante de los servidores web front-end en lugar de un equilibrador de carga interno de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-267">For intrusion detection and analysis of payloads, consider using a network virtual appliance in front of the front-end web servers instead of an internal Azure load balancer.</span></span>
- <span data-ttu-id="ecd12-268">Como opción, use directivas IPsec para el cifrado del tráfico de texto no cifrado entre servidores.</span><span class="sxs-lookup"><span data-stu-id="ecd12-268">As an option, use IPsec policies for encryption of cleartext traffic between servers.</span></span> <span data-ttu-id="ecd12-269">Si también va a realizar el aislamiento de la subred, actualice las reglas del grupo de seguridad de red para permitir el tráfico IPsec.</span><span class="sxs-lookup"><span data-stu-id="ecd12-269">If you are also doing subnet isolation, update your network security group rules to allow IPsec traffic.</span></span>
- <span data-ttu-id="ecd12-270">Instalar agentes antimalware para las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="ecd12-270">Install anti-malware agents for the VMs.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="ecd12-271">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="ecd12-271">Deploy the solution</span></span>

<span data-ttu-id="ecd12-272">Los scripts de implementación de esta arquitectura de referencia están disponibles en [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="ecd12-272">The deployment scripts for this reference architecture are available on [GitHub][github].</span></span> 

<span data-ttu-id="ecd12-273">Esta arquitectura se puede implementar de forma incremental o toda de una vez.</span><span class="sxs-lookup"><span data-stu-id="ecd12-273">You can deploy this architecture incrementally or all at once.</span></span> <span data-ttu-id="ecd12-274">La primera vez, se recomienda una implementación incremental para que pueda ver lo que hace cada implementación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-274">The first time, we recommend an incremental deployment, so that you can see what each deployment does.</span></span> <span data-ttu-id="ecd12-275">Especifique el incremento mediante uno de los siguientes parámetros *mode*.</span><span class="sxs-lookup"><span data-stu-id="ecd12-275">Specify the increment using one of the following *mode* parameters.</span></span>

| <span data-ttu-id="ecd12-276">Mode</span><span class="sxs-lookup"><span data-stu-id="ecd12-276">Mode</span></span>           | <span data-ttu-id="ecd12-277">Qué hace</span><span class="sxs-lookup"><span data-stu-id="ecd12-277">What it does</span></span>                                                                                                            |
|----------------|-------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ecd12-278">onprem</span><span class="sxs-lookup"><span data-stu-id="ecd12-278">onprem</span></span>         | <span data-ttu-id="ecd12-279">(Opcional) Implementa un entorno de red local simulado para pruebas o evaluación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-279">(Optional) Deploys a simulated on-premises network environment, for testing or evaluation.</span></span> <span data-ttu-id="ecd12-280">Este paso no conecta a una red local real.</span><span class="sxs-lookup"><span data-stu-id="ecd12-280">This step does not connect to an actual on-premises network.</span></span> |
| <span data-ttu-id="ecd12-281">infrastructure</span><span class="sxs-lookup"><span data-stu-id="ecd12-281">infrastructure</span></span> | <span data-ttu-id="ecd12-282">Implementa la infraestructura de red de SharePoint 2016 y JumpBox en Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-282">Deploys the SharePoint 2016 network infrastructure and jumpbox to Azure.</span></span>                                                |
| <span data-ttu-id="ecd12-283">createvpn</span><span class="sxs-lookup"><span data-stu-id="ecd12-283">createvpn</span></span>      | <span data-ttu-id="ecd12-284">Implementa una puerta de enlace de red virtual para redes locales y de SharePoint y se conecta a ellas.</span><span class="sxs-lookup"><span data-stu-id="ecd12-284">Deploys a virtual network gateway for both the SharePoint and on-premises networks and connects them.</span></span> <span data-ttu-id="ecd12-285">Ejecute este paso solo si ha ejecutado el paso `onprem`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-285">Run this step only if you ran the `onprem` step.</span></span>                |
| <span data-ttu-id="ecd12-286">carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="ecd12-286">workload</span></span>       | <span data-ttu-id="ecd12-287">Implementa los servidores de SharePoint en la red de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-287">Deploys the SharePoint servers to the SharePoint network.</span></span>                                                               |
| <span data-ttu-id="ecd12-288">security</span><span class="sxs-lookup"><span data-stu-id="ecd12-288">security</span></span>       | <span data-ttu-id="ecd12-289">Implementa el grupo de seguridad de red en la red de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-289">Deploys the network security group to the SharePoint network.</span></span>                                                           |
| <span data-ttu-id="ecd12-290">todas</span><span class="sxs-lookup"><span data-stu-id="ecd12-290">all</span></span>            | <span data-ttu-id="ecd12-291">Implementa todas las implementaciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="ecd12-291">Deploys all the preceding deployments.</span></span>                            


<span data-ttu-id="ecd12-292">Para implementar la arquitectura de manera incremental con un entorno de red local simulado, ejecute los pasos siguientes en orden:</span><span class="sxs-lookup"><span data-stu-id="ecd12-292">To deploy the architecture incrementally with a simulated on-premises network environment, run the following steps in order:</span></span>

1. <span data-ttu-id="ecd12-293">onprem</span><span class="sxs-lookup"><span data-stu-id="ecd12-293">onprem</span></span>
2. <span data-ttu-id="ecd12-294">infrastructure</span><span class="sxs-lookup"><span data-stu-id="ecd12-294">infrastructure</span></span>
3. <span data-ttu-id="ecd12-295">createvpn</span><span class="sxs-lookup"><span data-stu-id="ecd12-295">createvpn</span></span>
4. <span data-ttu-id="ecd12-296">carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="ecd12-296">workload</span></span>
5. <span data-ttu-id="ecd12-297">security</span><span class="sxs-lookup"><span data-stu-id="ecd12-297">security</span></span>

<span data-ttu-id="ecd12-298">Para implementar la arquitectura de manera incremental sin un entorno de red local simulado, ejecute los pasos siguientes en orden:</span><span class="sxs-lookup"><span data-stu-id="ecd12-298">To deploy the architecture incrementally without a simulated on-premises network environment, run the following steps in order:</span></span>

1. <span data-ttu-id="ecd12-299">infrastructure</span><span class="sxs-lookup"><span data-stu-id="ecd12-299">infrastructure</span></span>
2. <span data-ttu-id="ecd12-300">carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="ecd12-300">workload</span></span>
3. <span data-ttu-id="ecd12-301">security</span><span class="sxs-lookup"><span data-stu-id="ecd12-301">security</span></span>

<span data-ttu-id="ecd12-302">Para implementar todo en un solo paso, use `all`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-302">To deploy everything in one step, use `all`.</span></span> <span data-ttu-id="ecd12-303">Tenga en cuenta que todo el proceso puede tardar varias horas.</span><span class="sxs-lookup"><span data-stu-id="ecd12-303">Note that the entire process may take several hours.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="ecd12-304">requisitos previos</span><span class="sxs-lookup"><span data-stu-id="ecd12-304">Prerequisites</span></span>

* <span data-ttu-id="ecd12-305">Instale la versión más reciente de [Azure PowerShell][azure-ps].</span><span class="sxs-lookup"><span data-stu-id="ecd12-305">Install the latest version of [Azure PowerShell][azure-ps].</span></span>

* <span data-ttu-id="ecd12-306">Antes de implementar esta arquitectura de referencia, compruebe que la suscripción tenga suficiente cuota: al menos 38 núcleos.</span><span class="sxs-lookup"><span data-stu-id="ecd12-306">Before deploying this reference architecture, verify that your subscription has sufficient quota—at least 38 cores.</span></span> <span data-ttu-id="ecd12-307">Si no dispone de suficiente, use Azure Portal para enviar una solicitud de soporte técnico de más cuota.</span><span class="sxs-lookup"><span data-stu-id="ecd12-307">If you don't have enough, use the Azure portal to submit a support request for more quota.</span></span>

* <span data-ttu-id="ecd12-308">Para calcular el costo de esta implementación, consulte la [Calculadora de precios de Azure][azure-pricing].</span><span class="sxs-lookup"><span data-stu-id="ecd12-308">To estimate the cost of this deployment, see the [Azure Pricing Calculator][azure-pricing].</span></span>

### <a name="deploy-the-reference-architecture"></a><span data-ttu-id="ecd12-309">Implementación de la arquitectura de referencia</span><span class="sxs-lookup"><span data-stu-id="ecd12-309">Deploy the reference architecture</span></span>

1.  <span data-ttu-id="ecd12-310">Descargue o clone el [repositorio de GitHub][github] en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="ecd12-310">Download or clone the [GitHub repo][github] to your local computer.</span></span>

2.  <span data-ttu-id="ecd12-311">Abra una ventana de PowerShell y navegue hasta la carpeta `/sharepoint/sharepoint-2016`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-311">Open a PowerShell window and navigate to the `/sharepoint/sharepoint-2016` folder.</span></span>

3.  <span data-ttu-id="ecd12-312">Ejecute el siguiente comando de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ecd12-312">Run the following PowerShell command.</span></span> <span data-ttu-id="ecd12-313">Para \<subscription id\>, use el identificador de suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-313">For \<subscription id\>, use your Azure subscription ID.</span></span> <span data-ttu-id="ecd12-314">Para \<location\>, especifique una región de Azure, como `eastus` o `westus`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-314">For \<location\>, specify an Azure region, such as `eastus` or `westus`.</span></span> <span data-ttu-id="ecd12-315">Para \<mode\>, especifique `onprem`, `infrastructure`, `createvpn`, `workload`, `security` o `all`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-315">For \<mode\>, specify `onprem`, `infrastructure`, `createvpn`, `workload`, `security`, or `all`.</span></span>

    ```powershell
    .\Deploy-ReferenceArchitecture.ps1 <subscription id> <location> <mode>
    ```   
4. <span data-ttu-id="ecd12-316">Cuando se le solicite, inicie sesión en su cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="ecd12-316">When prompted, log on to your Azure account.</span></span> <span data-ttu-id="ecd12-317">Los scripts de implementación pueden tardar varias horas en completarse, según el modo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="ecd12-317">The deployment scripts can take up to several hours to complete, depending on the mode you selected.</span></span>

5. <span data-ttu-id="ecd12-318">Cuando la implementación finalice, ejecute los scripts para configurar los grupos de disponibilidad AlwaysOn de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ecd12-318">When the deployment completes, run the scripts to configure SQL Server Always On Availability Groups.</span></span> <span data-ttu-id="ecd12-319">Consulte el archivo [Léame][readme] para más información.</span><span class="sxs-lookup"><span data-stu-id="ecd12-319">See the [readme][readme] for details.</span></span>

> [!WARNING]
> <span data-ttu-id="ecd12-320">Los archivos de parámetros incluyen una contraseña codificada de forma rígida (`AweS0me@PW`) en varios lugares.</span><span class="sxs-lookup"><span data-stu-id="ecd12-320">The parameter files include a hard-coded password (`AweS0me@PW`) in various places.</span></span> <span data-ttu-id="ecd12-321">Cambie estos valores antes de realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="ecd12-321">Change these values before you deploy.</span></span>


## <a name="validate-the-deployment"></a><span data-ttu-id="ecd12-322">Validación de la implementación</span><span class="sxs-lookup"><span data-stu-id="ecd12-322">Validate the deployment</span></span>

<span data-ttu-id="ecd12-323">Después de implementar esta arquitectura de referencia, aparecen los siguientes grupos de recursos en la suscripción que usó:</span><span class="sxs-lookup"><span data-stu-id="ecd12-323">After you deploy this reference architecture, the following resource groups are listed under the Subscription that you used:</span></span>

| <span data-ttu-id="ecd12-324">Grupo de recursos</span><span class="sxs-lookup"><span data-stu-id="ecd12-324">Resource Group</span></span>        | <span data-ttu-id="ecd12-325">Propósito</span><span class="sxs-lookup"><span data-stu-id="ecd12-325">Purpose</span></span>                                                                                         |
|-----------------------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ecd12-326">ra-onprem-sp2016-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-326">ra-onprem-sp2016-rg</span></span>   | <span data-ttu-id="ecd12-327">Red local simulada con Active Directory, federada con la red de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-327">Simulated on-premises network with Active Directory, federated with the SharePoint 2016 network</span></span> |
| <span data-ttu-id="ecd12-328">ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-328">ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-329">Infraestructura para admitir la implementación de SharePoint</span><span class="sxs-lookup"><span data-stu-id="ecd12-329">Infrastructure to support SharePoint deployment</span></span>                                                 |
| <span data-ttu-id="ecd12-330">ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-330">ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-331">SharePoint y recursos complementarios</span><span class="sxs-lookup"><span data-stu-id="ecd12-331">SharePoint and supporting resources</span></span>                                                             |

### <a name="validate-access-to-the-sharepoint-site-from-the-on-premises-network"></a><span data-ttu-id="ecd12-332">Validación del acceso al sitio de SharePoint desde la red local</span><span class="sxs-lookup"><span data-stu-id="ecd12-332">Validate access to the SharePoint site from the on-premises network</span></span>

1. <span data-ttu-id="ecd12-333">En [Azure Portal][azure-portal], en **Grupos de recursos**, seleccione el grupo de recursos `ra-onprem-sp2016-rg`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-333">In the [Azure portal][azure-portal], under **Resource groups**, select the `ra-onprem-sp2016-rg` resource group.</span></span>

2. <span data-ttu-id="ecd12-334">En la lista de recursos, seleccione el recurso de máquina virtual denominado `ra-adds-user-vm1`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-334">In the list of resources, select the VM resource named `ra-adds-user-vm1`.</span></span> 

3. <span data-ttu-id="ecd12-335">Conéctese a la máquina virtual como se describe en [Conexión a la máquina virtual][connect-to-vm].</span><span class="sxs-lookup"><span data-stu-id="ecd12-335">Connect to the VM, as described in [Connect to virtual machine][connect-to-vm].</span></span> <span data-ttu-id="ecd12-336">El nombre de usuario es `\onpremuser`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-336">The user name is `\onpremuser`.</span></span>

5.  <span data-ttu-id="ecd12-337">Cuando se establezca la conexión remota a la máquina virtual, abra un explorador en la máquina virtual y vaya a `http://portal.contoso.local`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-337">When the remote connection to the VM is established, open a browser in the VM and navigate to `http://portal.contoso.local`.</span></span>

6.  <span data-ttu-id="ecd12-338">En el cuadro **Seguridad de Windows**, inicie sesión en el portal de SharePoint con `contoso.local\testuser` como nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="ecd12-338">In the **Windows Security** box, log on to the SharePoint portal using `contoso.local\testuser` for the user name.</span></span>

<span data-ttu-id="ecd12-339">Este inicio de sesión crea un túnel desde el dominio de Fabrikam.com que usa la red local hasta el dominio de contoso.local que usa el portal de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ecd12-339">This logon tunnels from the Fabrikam.com domain used by the on-premises network to the contoso.local domain used by the SharePoint portal.</span></span> <span data-ttu-id="ecd12-340">Cuando se abra el sitio de SharePoint, verá el sitio de demostración raíz.</span><span class="sxs-lookup"><span data-stu-id="ecd12-340">When the SharePoint site opens, you'll see the root demo site.</span></span>

### <a name="validate-jumpbox-access-to-vms-and-check-configuration-settings"></a><span data-ttu-id="ecd12-341">Validación del acceso del JumpBox a las máquinas virtuales y comprobación de la configuración</span><span class="sxs-lookup"><span data-stu-id="ecd12-341">Validate jumpbox access to VMs and check configuration settings</span></span>

1.  <span data-ttu-id="ecd12-342">En [Azure Portal][azure-portal], en **Grupos de recursos**, seleccione el grupo de recursos `ra-sp2016-network-rg`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-342">In [Azure portal][azure-portal], under **Resource groups**, select the `ra-sp2016-network-rg` resource group.</span></span>

2.  <span data-ttu-id="ecd12-343">En la lista de recursos, seleccione el recurso de máquina virtual denominado `ra-sp2016-jb-vm1`, que es el JumpBox.</span><span class="sxs-lookup"><span data-stu-id="ecd12-343">In the list of resources, select the VM resource named `ra-sp2016-jb-vm1`, which is the jumpbox.</span></span>

3. <span data-ttu-id="ecd12-344">Conéctese a la máquina virtual como se describe en [Conexión a la máquina virtual][connect-to-vm].</span><span class="sxs-lookup"><span data-stu-id="ecd12-344">Connect to the VM, as described in [Connect to virtual machine][connect-to-vm].</span></span> <span data-ttu-id="ecd12-345">El nombre de usuario es `testuser`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-345">The user name is `testuser`.</span></span>

4.  <span data-ttu-id="ecd12-346">Después de iniciar sesión en el JumpBox, abra una sesión RDP desde él.</span><span class="sxs-lookup"><span data-stu-id="ecd12-346">After you log onto the jumpbox, open an RDP session from the jumpbox.</span></span> <span data-ttu-id="ecd12-347">Conéctese a cualquier otra máquina virtual de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="ecd12-347">Connect to any other VMs in the VNet.</span></span> <span data-ttu-id="ecd12-348">El nombre de usuario es `testuser`.</span><span class="sxs-lookup"><span data-stu-id="ecd12-348">The username is `testuser`.</span></span> <span data-ttu-id="ecd12-349">Puede omitir la advertencia sobre el certificado de seguridad del equipo remoto.</span><span class="sxs-lookup"><span data-stu-id="ecd12-349">You can ignore the warning about the remote computer's security certificate.</span></span>

5.  <span data-ttu-id="ecd12-350">Cuando se abra la conexión remota a la máquina virtual, revise la configuración y realice cambios mediante las herramientas administrativas, como el Administrador del servidor.</span><span class="sxs-lookup"><span data-stu-id="ecd12-350">When the remote connection to the VM opens, review the configuration and make changes using the administrative tools such as Server Manager.</span></span>

<span data-ttu-id="ecd12-351">En la siguiente tabla se muestran las máquinas virtuales que se implementan.</span><span class="sxs-lookup"><span data-stu-id="ecd12-351">The following table shows the VMs that are deployed.</span></span> 

| <span data-ttu-id="ecd12-352">Nombre de recurso</span><span class="sxs-lookup"><span data-stu-id="ecd12-352">Resource Name</span></span>      | <span data-ttu-id="ecd12-353">Propósito</span><span class="sxs-lookup"><span data-stu-id="ecd12-353">Purpose</span></span>                                   | <span data-ttu-id="ecd12-354">Grupo de recursos</span><span class="sxs-lookup"><span data-stu-id="ecd12-354">Resource Group</span></span>        | <span data-ttu-id="ecd12-355">Nombre de la máquina virtual</span><span class="sxs-lookup"><span data-stu-id="ecd12-355">VM Name</span></span>                       |
|--------------------|-------------------------------------------|-----------------------|-------------------------------|
| <span data-ttu-id="ecd12-356">Ra-sp2016-ad-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-356">Ra-sp2016-ad-vm1</span></span>   | <span data-ttu-id="ecd12-357">Active Directory + DNS</span><span class="sxs-lookup"><span data-stu-id="ecd12-357">Active Directory + DNS</span></span>                    | <span data-ttu-id="ecd12-358">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-358">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-359">Ad1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-359">Ad1.contoso.local</span></span>             |
| <span data-ttu-id="ecd12-360">Ra-sp2016-ad-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-360">Ra-sp2016-ad-vm2</span></span>   | <span data-ttu-id="ecd12-361">Active Directory + DNS</span><span class="sxs-lookup"><span data-stu-id="ecd12-361">Active Directory + DNS</span></span>                    | <span data-ttu-id="ecd12-362">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-362">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-363">Ad2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-363">Ad2.contoso.local</span></span>             |
| <span data-ttu-id="ecd12-364">Ra-sp2016-fsw-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-364">Ra-sp2016-fsw-vm1</span></span>  | <span data-ttu-id="ecd12-365">SharePoint</span><span class="sxs-lookup"><span data-stu-id="ecd12-365">SharePoint</span></span>                                | <span data-ttu-id="ecd12-366">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-366">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-367">Fsw1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-367">Fsw1.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-368">Ra-sp2016-jb-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-368">Ra-sp2016-jb-vm1</span></span>   | <span data-ttu-id="ecd12-369">JumpBox</span><span class="sxs-lookup"><span data-stu-id="ecd12-369">Jumpbox</span></span>                                   | <span data-ttu-id="ecd12-370">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-370">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-371">Jb (use la IP pública para iniciar sesión)</span><span class="sxs-lookup"><span data-stu-id="ecd12-371">Jb (use public IP to log on)</span></span> |
| <span data-ttu-id="ecd12-372">Ra-sp2016-sql-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-372">Ra-sp2016-sql-vm1</span></span>  | <span data-ttu-id="ecd12-373">SQL Always On: conmutación por error</span><span class="sxs-lookup"><span data-stu-id="ecd12-373">SQL Always On - Failover</span></span>                  | <span data-ttu-id="ecd12-374">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-374">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-375">Sq1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-375">Sq1.contoso.local</span></span>             |
| <span data-ttu-id="ecd12-376">Ra-sp2016-sql-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-376">Ra-sp2016-sql-vm2</span></span>  | <span data-ttu-id="ecd12-377">SQL Always On: principal</span><span class="sxs-lookup"><span data-stu-id="ecd12-377">SQL Always On - Primary</span></span>                   | <span data-ttu-id="ecd12-378">Ra-sp2016-network-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-378">Ra-sp2016-network-rg</span></span>  | <span data-ttu-id="ecd12-379">Sq2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-379">Sq2.contoso.local</span></span>             |
| <span data-ttu-id="ecd12-380">Ra-sp2016-app-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-380">Ra-sp2016-app-vm1</span></span>  | <span data-ttu-id="ecd12-381">MinRole para aplicación de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-381">SharePoint 2016 Application MinRole</span></span>       | <span data-ttu-id="ecd12-382">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-382">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-383">App1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-383">App1.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-384">Ra-sp2016-app-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-384">Ra-sp2016-app-vm2</span></span>  | <span data-ttu-id="ecd12-385">MinRole para aplicación de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-385">SharePoint 2016 Application MinRole</span></span>       | <span data-ttu-id="ecd12-386">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-386">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-387">App2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-387">App2.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-388">Ra-sp2016-dch-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-388">Ra-sp2016-dch-vm1</span></span>  | <span data-ttu-id="ecd12-389">MinRole para caché distribuida de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-389">SharePoint 2016 Distributed Cache MinRole</span></span> | <span data-ttu-id="ecd12-390">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-390">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-391">Dch1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-391">Dch1.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-392">Ra-sp2016-dch-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-392">Ra-sp2016-dch-vm2</span></span>  | <span data-ttu-id="ecd12-393">MinRole para caché distribuida de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-393">SharePoint 2016 Distributed Cache MinRole</span></span> | <span data-ttu-id="ecd12-394">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-394">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-395">Dch2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-395">Dch2.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-396">Ra-sp2016-srch-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-396">Ra-sp2016-srch-vm1</span></span> | <span data-ttu-id="ecd12-397">MinRole para búsqueda de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-397">SharePoint 2016 Search MinRole</span></span>            | <span data-ttu-id="ecd12-398">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-398">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-399">Srch1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-399">Srch1.contoso.local</span></span>           |
| <span data-ttu-id="ecd12-400">Ra-sp2016-srch-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-400">Ra-sp2016-srch-vm2</span></span> | <span data-ttu-id="ecd12-401">MinRole para búsqueda de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-401">SharePoint 2016 Search MinRole</span></span>            | <span data-ttu-id="ecd12-402">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-402">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-403">Srch2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-403">Srch2.contoso.local</span></span>           |
| <span data-ttu-id="ecd12-404">Ra-sp2016-wfe-vm1</span><span class="sxs-lookup"><span data-stu-id="ecd12-404">Ra-sp2016-wfe-vm1</span></span>  | <span data-ttu-id="ecd12-405">MinRole para front-end web de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-405">SharePoint 2016 Web Front End MinRole</span></span>     | <span data-ttu-id="ecd12-406">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-406">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-407">Wfe1.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-407">Wfe1.contoso.local</span></span>            |
| <span data-ttu-id="ecd12-408">Ra-sp2016-wfe-vm2</span><span class="sxs-lookup"><span data-stu-id="ecd12-408">Ra-sp2016-wfe-vm2</span></span>  | <span data-ttu-id="ecd12-409">MinRole para front-end web de SharePoint 2016</span><span class="sxs-lookup"><span data-stu-id="ecd12-409">SharePoint 2016 Web Front End MinRole</span></span>     | <span data-ttu-id="ecd12-410">Ra-sp2016-workload-rg</span><span class="sxs-lookup"><span data-stu-id="ecd12-410">Ra-sp2016-workload-rg</span></span> | <span data-ttu-id="ecd12-411">Wfe2.contoso.local</span><span class="sxs-lookup"><span data-stu-id="ecd12-411">Wfe2.contoso.local</span></span>            |


<span data-ttu-id="ecd12-412">**_Personas que han contribuido a esta arquitectura de referencia_**  &mdash; Joe Davies, Bob Fox, Neil Hodgkinson, Paul Stork</span><span class="sxs-lookup"><span data-stu-id="ecd12-412">**_Contributors to this reference architecture_** &mdash;  Joe Davies, Bob Fox, Neil Hodgkinson, Paul Stork</span></span>

<!-- links -->

[availability-set]: /azure/virtual-machines/windows/manage-availability
[azure-portal]: https://portal.azure.com
[azure-ps]: /powershell/azure/overview
[azure-pricing]: https://azure.microsoft.com/pricing/calculator/
[bastion-host]: https://en.wikipedia.org/wiki/Bastion_host
[create-availability-group]: https://technet.microsoft.com/library/mt793548(v=office.16).aspx
[connect-to-vm]: /azure/virtual-machines/windows/quick-create-portal#connect-to-virtual-machine
[github]: https://github.com/mspnp/reference-architectures
[hybrid-ra]: ../hybrid-networking/index.md
[hybrid-vpn-ra]: ../hybrid-networking/vpn.md
[load-balancer]: /azure/load-balancer/load-balancer-internal-overview
[managed-disks]: /azure/storage/storage-managed-disks-overview
[minroles]: https://technet.microsoft.com/library/mt346114(v=office.16).aspx
[nsg]: /azure/virtual-network/virtual-networks-nsg
[office-web-apps]: https://support.microsoft.com/help/3199955/office-web-apps-and-office-online-server-supportability-in-azure
[paired-regions]: /azure/best-practices-availability-paired-regions
[readme]: https://github.com/mspnp/reference-architectures/tree/master/sharepoint/sharepoint-2016
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[quotas]: /azure/azure-subscription-service-limits
[sharepoint-accounts]: https://technet.microsoft.com/library/ee662513(v=office.16).aspx
[sharepoint-crawling]: https://technet.microsoft.com/library/dn535606(v=office.16).aspx
[sharepoint-dr]: https://technet.microsoft.com/library/ff628971(v=office.16).aspx
[sharepoint-hybrid]: https://aka.ms/sphybrid
[sharepoint-minrole]: https://technet.microsoft.com/library/mt743705(v=office.16).aspx
[sharepoint-ops]: https://technet.microsoft.com/library/cc262289(v=office.16).aspx
[sharepoint-reqs]: https://technet.microsoft.com/library/cc262485(v=office.16).aspx
[sharepoint-search]: https://technet.microsoft.com/library/dn342836.aspx
[sql-always-on]: /sql/database-engine/availability-groups/windows/always-on-availability-groups-sql-server
[sql-performance]: /virtual-machines/windows/sql/virtual-machines-windows-sql-performance
[sql-server-capacity-planning]: https://technet.microsoft.com/library/cc298801(v=office.16).aspx
[sql-quorum]: https://technet.microsoft.com/library/cc731739(v=ws.11).aspx
[sql-sharepoint-best-practices]: https://technet.microsoft.com/library/hh292622(v=office.16).aspx
[tempdb]: /sql/relational-databases/databases/tempdb-database
[virtual-networks-nsg]: /azure/virtual-network/virtual-networks-nsg
[visio-download]: https://archcenter.blob.core.windows.net/cdn/Sharepoint-2016.vsdx
[vm-sizes-general]: /azure/virtual-machines/windows/sizes-general
[vm-sizes-memory]: /azure/virtual-machines/windows/sizes-memory
[windows-n-tier]: ../virtual-machines-windows/n-tier.md
