---
title: Hacer que todo sea redundante
description: Cree redundancia en la aplicación para evitar los puntos únicos de error.
author: MikeWasson
ms.date: 08/30/2018
ms.openlocfilehash: 18f48ea37f90846e4d337819e6c897d56e472d49
ms.sourcegitcommit: 94d50043db63416c4d00cebe927a0c88f78c3219
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/28/2018
ms.locfileid: "47428047"
---
# <a name="make-all-things-redundant"></a><span data-ttu-id="1fd5f-103">Hacer que todo sea redundante</span><span class="sxs-lookup"><span data-stu-id="1fd5f-103">Make all things redundant</span></span>

## <a name="build-redundancy-into-your-application-to-avoid-having-single-points-of-failure"></a><span data-ttu-id="1fd5f-104">Creación de redundancia en la aplicación, para evitar tener puntos únicos de error</span><span class="sxs-lookup"><span data-stu-id="1fd5f-104">Build redundancy into your application, to avoid having single points of failure</span></span>

<span data-ttu-id="1fd5f-105">Las aplicaciones resistentes esquivan los errores al enrutar.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-105">A resilient application routes around failure.</span></span> <span data-ttu-id="1fd5f-106">Identifique las rutas críticas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-106">Identify the critical paths in your application.</span></span> <span data-ttu-id="1fd5f-107">¿Hay redundancia en cada punto de la ruta de acceso?</span><span class="sxs-lookup"><span data-stu-id="1fd5f-107">Is there redundancy at each point in the path?</span></span> <span data-ttu-id="1fd5f-108">Si se produce un error en un subsistema, ¿conmutará por error la aplicación?</span><span class="sxs-lookup"><span data-stu-id="1fd5f-108">If a subsystem fails, will the application fail over to something else?</span></span>

## <a name="recommendations"></a><span data-ttu-id="1fd5f-109">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="1fd5f-109">Recommendations</span></span> 

<span data-ttu-id="1fd5f-110">**Considere los requisitos empresariales**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-110">**Consider business requirements**.</span></span> <span data-ttu-id="1fd5f-111">La cantidad de redundancia integrada en un sistema puede afectar tanto al costo como a la complejidad.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-111">The amount of redundancy built into a system can affect both cost and complexity.</span></span> <span data-ttu-id="1fd5f-112">La arquitectura debe recibir información de los requisitos empresariales, como el objetivo de tiempo de recuperación (RTO).</span><span class="sxs-lookup"><span data-stu-id="1fd5f-112">Your architecture should be informed by your business requirements, such as recovery time objective (RTO).</span></span> <span data-ttu-id="1fd5f-113">Por ejemplo, las implementaciones en varias regiones son más caras que las de una sola región y son más complicadas de administrar.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-113">For example, a multi-region deployment is more expensive than a single-region deployment, and is more complicated to manage.</span></span> <span data-ttu-id="1fd5f-114">Necesitará procedimientos operativos para controlar la conmutación por error y la conmutación por recuperación.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-114">You will need operational procedures to handle failover and failback.</span></span> <span data-ttu-id="1fd5f-115">El costo adicional y la complejidad podrían estar justificados para algunos escenarios empresariales pero no para otros.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-115">The additional cost and complexity might be justified for some business scenarios and not others.</span></span>

<span data-ttu-id="1fd5f-116">**Coloque máquinas virtuales con un equilibrador de carga**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-116">**Place VMs behind a load balancer**.</span></span> <span data-ttu-id="1fd5f-117">No use una sola máquina virtual para las cargas de trabajo críticas.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-117">Don't use a single VM for mission-critical workloads.</span></span> <span data-ttu-id="1fd5f-118">En su lugar, coloque varias máquinas virtuales con un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-118">Instead, place multiple VMs behind a load balancer.</span></span> <span data-ttu-id="1fd5f-119">Si alguna deja de estar disponible, el equilibrador de carga distribuye el tráfico a las demás máquinas virtuales en buen estado.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-119">If any VM becomes unavailable, the load balancer distributes traffic to the remaining healthy VMs.</span></span> <span data-ttu-id="1fd5f-120">Para aprender a implementar esta configuración, consulte el artículo sobre la ejecución de [varias máquinas virtuales para conseguir escalabilidad y disponibilidad][multi-vm-blueprint].</span><span class="sxs-lookup"><span data-stu-id="1fd5f-120">To learn how to deploy this configuration, see [Multiple VMs for scalability and availability][multi-vm-blueprint].</span></span>

![](./images/load-balancing.svg)

<span data-ttu-id="1fd5f-121">**Replique las bases de datos**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-121">**Replicate databases**.</span></span> <span data-ttu-id="1fd5f-122">Azure SQL Database y Cosmos DB replican automáticamente los datos dentro de una región y se puede habilitar la replicación geográfica de una región a otra.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-122">Azure SQL Database and Cosmos DB automatically replicate the data within a region, and you can enable geo-replication across regions.</span></span> <span data-ttu-id="1fd5f-123">Si utiliza una solución de base de datos de IaaS, elija una que admita la replicación y la conmutación por error, como los [grupos de disponibilidad AlwaysOn (SQL Server)][sql-always-on].</span><span class="sxs-lookup"><span data-stu-id="1fd5f-123">If you are using an IaaS database solution, choose one that supports replication and failover, such as [SQL Server Always On Availability Groups][sql-always-on].</span></span> 

<span data-ttu-id="1fd5f-124">**Habilite la replicación geográfica**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-124">**Enable geo-replication**.</span></span> <span data-ttu-id="1fd5f-125">La replicación geográfica para [Azure SQL Database][sql-geo-replication] y [Cosmos DB][cosmosdb-geo-replication] crea réplicas legibles secundarias de los datos en una o varias regiones secundarias.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-125">Geo-replication for [Azure SQL Database][sql-geo-replication] and [Cosmos DB][cosmosdb-geo-replication] creates secondary readable replicas of your data in one or more secondary regions.</span></span> <span data-ttu-id="1fd5f-126">Si se produce una interrupción, la base de datos puede conmutar por error en la región secundaria para las operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-126">In the event of an outage, the database can fail over to the secondary region for writes.</span></span>

<span data-ttu-id="1fd5f-127">**Cree particiones para conseguir disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-127">**Partition for availability**.</span></span> <span data-ttu-id="1fd5f-128">La creación de particiones de base de datos se suele usar para mejorar la escalabilidad, pero también puede mejorar la disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-128">Database partitioning is often used to improve scalability, but it can also improve availability.</span></span> <span data-ttu-id="1fd5f-129">Aunque una partición deje de funcionar, puede acceder a las demás particiones.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-129">If one shard goes down, the other shards can still be reached.</span></span> <span data-ttu-id="1fd5f-130">Un error en una partición solo provocará la interrupción en un subconjunto de transacciones.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-130">A failure in one shard will only disrupt a subset of the total transactions.</span></span> 

<span data-ttu-id="1fd5f-131">**Realice implementaciones en más de una región**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-131">**Deploy to more than one region**.</span></span> <span data-ttu-id="1fd5f-132">Para la máxima disponibilidad, implemente la aplicación en más de una región.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-132">For the highest availability, deploy the application to more than one region.</span></span> <span data-ttu-id="1fd5f-133">De este modo, en el caso excepcional de un problema que afecte a toda una región, la aplicación podrá conmutar por error a otra.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-133">That way, in the rare case when a problem affects an entire region, the application can fail over to another region.</span></span> <span data-ttu-id="1fd5f-134">En el siguiente diagrama se muestra una aplicación en varias regiones que utiliza Azure Traffic Manager para controlar la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-134">The following diagram shows a multi-region application that uses Azure Traffic Manager to handle failover.</span></span>

![](images/failover.svg)

<span data-ttu-id="1fd5f-135">**Sincronice la conmutación por error del front-end y del back-end**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-135">**Synchronize front and backend failover**.</span></span> <span data-ttu-id="1fd5f-136">Use Azure Traffic Manager para conmutar por error el front-end.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-136">Use Azure Traffic Manager to fail over the front end.</span></span> <span data-ttu-id="1fd5f-137">Si el front-end está inaccesible en una región, Traffic Manager enruta las nuevas solicitudes a la región secundaria.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-137">If the front end becomes unreachable in one region, Traffic Manager will route new requests to the secondary region.</span></span> <span data-ttu-id="1fd5f-138">Dependiendo de la solución de base de datos, puede que necesite coordinar la conmutación por error de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-138">Depending on your database solution, you may need to coordinate failing over the database.</span></span> 

<span data-ttu-id="1fd5f-139">**Utilice la conmutación automática por error pero la conmutación por recuperación manual**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-139">**Use automatic failover but manual failback**.</span></span> <span data-ttu-id="1fd5f-140">Use Traffic Manager para la conmutación automática por error, pero no para la conmutación por recuperación automática.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-140">Use Traffic Manager for automatic failover, but not for automatic failback.</span></span> <span data-ttu-id="1fd5f-141">La conmutación por recuperación automática supone el riesgo de cambiar a la región principal antes de que se encuentre totalmente en buen estado.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-141">Automatic failback carries a risk that you might switch to the primary region before the region is completely healthy.</span></span> <span data-ttu-id="1fd5f-142">En su lugar, compruebe que todos los subsistemas de aplicación tengan un estado correcto antes de la conmutación por recuperación manual.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-142">Instead, verify that all application subsystems are healthy before manually failing back.</span></span> <span data-ttu-id="1fd5f-143">Además, dependiendo de la base de datos, deberá comprobar la coherencia de los datos antes de la conmutación por recuperación.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-143">Also, depending on the database, you might need to check data consistency before failing back.</span></span>

<span data-ttu-id="1fd5f-144">**Incluya redundancia para Traffic Manager**.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-144">**Include redundancy for Traffic Manager**.</span></span> <span data-ttu-id="1fd5f-145">Traffic Manager es un posible punto de error.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-145">Traffic Manager is a possible failure point.</span></span> <span data-ttu-id="1fd5f-146">Revise el Acuerdo de Nivel de Servicio de Traffic Manager y determine si el uso de Traffic Manager por sí solo cumple sus requisitos empresariales de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-146">Review the Traffic Manager SLA, and determine whether using Traffic Manager alone meets your business requirements for high availability.</span></span> <span data-ttu-id="1fd5f-147">Si no es así, considere la posibilidad de agregar otra solución de administración de tráfico como conmutación por recuperación.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-147">If not, consider adding another traffic management solution as a failback.</span></span> <span data-ttu-id="1fd5f-148">Si el servicio Azure Traffic Manager no funciona, cambie los registros CNAME de DNS para que apunten a otro servicio de administración del tráfico.</span><span class="sxs-lookup"><span data-stu-id="1fd5f-148">If the Azure Traffic Manager service fails, change your CNAME records in DNS to point to the other traffic management service.</span></span>



<!-- links -->

[multi-vm-blueprint]: ../../reference-architectures/virtual-machines-windows/multi-vm.md

[cassandra]: https://cassandra.apache.org/
[cosmosdb-geo-replication]: /azure/cosmos-db/distribute-data-globally
[sql-always-on]: https://msdn.microsoft.com/library/hh510230.aspx
[sql-geo-replication]: /azure/sql-database/sql-database-geo-replication-overview
